<style type="text/css">
	#discharge_table td {
		height:40px;
	}
	
	#suction_piping_table input[type="text"] {
		width: 100px;
	}
	
	#compressor_sizing_discharges input[type="text"] {
		width: 50px;
	}
	
	.discharge_circuit_piping_table input[type="text"], .centrifugal_design_piping_table input[type="text"], .reciprocation_design_piping_table input[type="text"]{
		width: 100px;
	}
	
	.mechanical_specification_field input[type="text"], .centrifugal_design_field input[type="text"] {
		width: 100px;
	}
	
	.mechanical_specification_header td, .mechanical_specification_field td, .centrifugal_design_header td, .centrifugal_design_field td {
		height: 40px;
	} 
	
	.deleted_column td {
		background-color: #E9E9E8;	
	}
</style>

<%= form_for compressor_sizing_tag, :url => compressor_sizing_tag.new_record? ? admin_compressor_sizings_path : admin_compressor_sizing_path(compressor_sizing_tag), :html => {:style => 'width:auto;'} do |f| %>
	<%= f.error_messages %>
	<%= f.hidden_field :company_id%>
	<div class="form-element">		
		<% if compressor_sizing_tag.new_record?%>
		<span style="float:left;margin-right:40px;">
			<%= f.label :client_id%><br>
			<%= f.hidden_field :client_id, :value => @user_project_settings.client_id%>
			<%= f.label :client_id, @user_project_settings.client.name, :style=>"font-weight:bold"%>			
		</span>
		<span style="float:left;margin-right:40px;">
			<%= f.label :project_id%><br>
			<%= f.hidden_field :project_id, :value => @user_project_settings.project_id%>
			<%= f.label :project_id, @user_project_settings.project.project_num, :style=>"font-weight:bold"%>			
		</span>
		<span style="float:left;margin-right:40px;">
			<%= f.label :process_unit_id%><br>
			<%= f.hidden_field :process_unit_id, :value => @user_project_settings.process_unit_id%>			
			<%= f.label :process_unit_id, @user_project_settings.process_unit.name, :style=>"font-weight:bold"%>
		</span>
		<% else%>
		<span style="float:left;margin-right:40px;">
			<%= f.label :client_id%><br>			
			<%= f.label :client_id, compressor_sizing_tag.client.name, :style=>"font-weight:bold"%>			
		</span>
		<span style="float:left;margin-right:40px;">
			<%= f.label :project_id%><br>
			<%= f.label :project_id, compressor_sizing_tag.project.project_num, :style=>"font-weight:bold"%>			
		</span>
		<span style="float:left;margin-right:40px;">
			<%= f.label :process_unit_id%><br>						
			<%= f.label :process_unit_id, compressor_sizing_tag.process_unit.name, :style=>"font-weight:bold"%>
		</span>			
		<% end%>
		<span style="float:left;margin-right:40px;">
			<%= f.label :compressor_sizing_tag%><br>
			<%= f.text_field :compressor_sizing_tag%>
		</span>
		<div class="clear"></div>
	</div>
	<div id="compressor_modes_div" class="form-element-last">
		<%= hidden_field_tag "compressor_sizing[compressor_sizing_tag_id]", compressor_sizing_tag.id%>
		<span style="float:left;margin-right:40px;">
			Select Mode	
			<%= select_tag "compressor_sizing[compressor_sizing_mode_id]", options_for_select(compressor_sizing_tag.compressor_sizing_modes.collect {|p| [p[:mode_name], p[:id]]}.insert(0, ''), compressor_sizing.compressor_sizing_mode_id), :id=>"compressor_sizing_mode_sel", :style=>"min-width:200px;"%>			
		</span>
		<span style="float:left;margin-right:40px;">
			<%= link_to "List Compressor Sizing Modes", "#", :id => "list_compressor_sizing_modes"%>
		</span>
		<span style="float:left;margin-right:40px;">
			<%= link_to "Add Compressor Sizing Mode", "#", :id => "add_compressor_sizing_mode"%>
		</span>
		<div class="clear"></div>
	</div>
	<div class="form-buttons">
		<%= f.submit compressor_sizing_tag.new_record? ? 'Create' : 'Update'%>		
  	</div>
	<div>
		<table>
			<tr><td>Associated Driver Tag</td><td><input type="button" value="Size Driver"/></td></tr>
		</table>		
	</div>
	
	<!-- tabs -->	
	<div id="compressor_tabs">
		<ul class="simple-tabs">
			<li><a href="#tab1">Suction</a></li>
			<li><a href="#tab2">Discharge</a></li>
			<li><a href="#tab3">Centrifugal Design</a></li>
			<li><a href="#tab4">Reciprocation Design</a></li>
			<li><a href="#tab5">Settle Out</a></li>
			<li><a href="#tab6">CV Summary</a></li>
			<li><a href="#tab7">FE Summary</a></li>
			<li><a href="#tab8">Review</a></li>						
		</ul>
		<div class="tab_container">
			<div id="tab1" class="tab_content">
				<%= fields_for compressor_sizing do |cs|%>
				<!-- Suction -->
				<table width="100%">
					<tr>
						<td width="25%"><b><u>Process Basis</u></b></td>
						<td width="25%"><%= cs.collection_select :process_basis_id, @company.heat_and_material_balances, :id, :case, :prompt => true%></td>
						<td colspan="2" width="50%"></td>
					</tr>
					<tr>
						<td colspan="2"><b><u>Upstream Conditions</u></b></td>
						<td colspan="2"></td>
					</tr>
					<tr>
						<td>Stream No</td>
						<td><%= cs.collection_select :su_stream_no, @streams, :stream_no, :display_stream_no, :prompt => true  %></td>
						<td>Vapor Density</td>
						<td><%= cs.text_field :su_vapor_density, :class=>"small-text-100"%>&nbsp;<label class="density_general_unit"></label></td>
					</tr>
					<tr>
						<td>Pressure</td>
						<td><%= cs.text_field :su_pressure, :class=>"small-text-100"%>&nbsp;<label class="pressure_general_unit"></label></td>
						<td>Vapor Viscosity</td>
						<td><%= cs.text_field :su_vapor_viscosity, :class=>"small-text-100"%>&nbsp;<label class="viscosity_general_unit"></label></td>
					</tr>
					<tr>
						<td>Temperature</td>
						<td><%= cs.text_field :su_temperature, :class=>"small-text-100"%>&nbsp;<label class="temperature_general_unit"></label></td>
						<td>Vapor mw</td>
						<td><%= cs.text_field :su_vapor_mw, :class=>"small-text-100"%></td>
					</tr>
					<tr>
						<td>Mass Vapor Fraction</td>
						<td><%= cs.text_field :su_mass_vapor_fraction, :class=>"small-text-100"%>&nbsp;</td>
						<td>Vapor K</td>
						<td><%= cs.text_field :su_vapor_k, :class=>"small-text-100"%></td>
					</tr>						
					<tr>
						<td>Mass Flow Rate</td>
						<td><%= cs.text_field :su_mass_flow_rate, :class=>"small-text-100"%>&nbsp;<label class="mass_flow_rate_general_unit"></label></td>
						<td>Vapor Z</td>
						<td><%= cs.text_field :su_vapor_z, :class=>"small-text-100"%></td>
					</tr>
					<tr>
						<td colspan="2"><b><u>Suction Pipe Configuration</u></b></td>
						<td colspan="2" rowspan="3"></td>
					</tr>
					<tr>
						<td colspan="2">
							<input type="button" value="Enter Circuit Piping" id="enter_circuit_piping"/>
							&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
							<input type="button" value="Calculate" />
						</td>
					</tr>
					<tr>
						<td colspan="2"><b><u>Suction Loss</u></b></td>						
					</tr>
					<tr>
						<td>Fitting &Delta;P</td>
						<td><%= cs.text_field :su_fitting_dP, :class=>"small-text-100"%>&nbsp;<label class="pressure_differential_unit"></label></td>
						<td>Total Suction &Delta;P</td>
						<td><%= cs.text_field :su_total_suction_dP, :class=>"small-text-100"%>&nbsp;<label class="pressure_general_unit"></label></td>
					</tr>
					<tr>
						<td>Equipment &Delta;P</td>
						<td><%= cs.text_field :su_equipment_dP, :class=>"small-text-100"%>&nbsp;<label class="pressure_differential_unit"></label></td>
						<td>Pressure @ Suction Nozzle</td>
						<td><%= cs.text_field :su_pressure_at_suction_nozzle, :class=>"small-text-100"%>&nbsp;<label class="pressure_general_unit"></label></td>
					</tr>
					<tr>
						<td>Control Valve &Delta;P</td>
						<td><%= cs.text_field :su_control_valve_dP, :class=>"small-text-100"%>&nbsp;<label class="pressure_differential_unit"></label></td>
						<td colspan="2" rowspan="2"></td>
					</tr>
					<tr>
						<td>Orifice &Delta;P</td>
						<td><%= cs.text_field :su_orifice_dP, :class=>"small-text-100"%>&nbsp;<label class="pressure_differential_unit"></label></td>		
					</tr>					
				</table>
				<% end%>
			</div>
			<div id="tab2" class="tab_content" style="overflow: auto;">
				<!-- Discharge -->
				
				<div>
					<input type="button" value="Clone Circuit Piping" id="show_clone_circuit_piping">
				</div>
				
				<table id="compressor_sizing_discharges" style="width:100%;">
					<tr>
						<th rowspan="2">S.No</th>
						<th rowspan="2">Design Circuit</th>
						<th rowspan="2">Process Basis</th>
						<th rowspan="2">Destination Stream</th>
						<th rowspan="2">Circuit Piping</th>							
						<th>Destination Pressure</th>
						<th>Fitting &Delta;P</th>
						<th>Equipment &Delta;P</th>
						<th>Control Valve &Delta;P</th>
						<th>Orifice &Delta;P</th>
						<th>Total System &Delta;P</th>
						<th>Press @ Discharge Nozzle</th>
						<th rowspan="2"></th>
					</tr>
					<tr>							
						<th><label class="pressure_general_unit"></label></th>
						<th><label class="pressure_differential_unit"></label></th>
						<th><label class="pressure_differential_unit"></label></th>
						<th><label class="pressure_differential_unit"></label></th>
						<th><label class="pressure_differential_unit"></label>r</th>
						<th><label class="pressure_general_unit"></label></th>
						<th><label class="pressure_general_unit"></label></th>
					</tr>
					<% compressor_sizing.compressor_sizing_discharges.each_with_index do |dc, i|%>
					<tr>
						<td>
							<b><%= i+1%></b>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][id]", dc.id, :id => "discharges_id_#{i+1}" %>
						</td>
						<td>
							<%= radio_button_tag "design_circuit", i+1, dc.design_circuit, :id =>"design_circuit_#{i+1}"%>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][design_circuit]", dc.design_circuit, :id => "discharge_design_circuit_#{i+1}" %>
						</td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][process_basis_id]", options_for_select(@company.heat_and_material_balances.collect {|p| [p[:case], p[:id]]}.insert(0, ''), dc.process_basis_id), {:id => "discharge_process_basis_id_#{i+1}", :row_id=>"#{i+1}"}%></td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][destination_stream_no]", options_for_select(Stream.get_stream_nos_by_process_basis(dc.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, ''), dc.destination_stream_no), :id => "discharge_destination_stream_no_#{i+1}", :style=>"width:100px;", :row_id=>"#{i+1}"%></td>
						<td><input type="button" value="Circuit Piping" class="circuit_piping_btn" row_id="<%= i+1%>"></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][destination_pressure]", dc.destination_pressure, :id => "discharge_destination_pressure_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][fitting_dp]", dc.fitting_dp, :id => "discharge_fitting_dp_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][equipment_dp]", dc.equipment_dp, :id => "discharge_equipment_dp_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][control_valve_dp]", dc.control_valve_dp, :id => "discharge_control_valve_dp_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][orifice_dp]", dc.orifice_dp, :id => "discharge_orifice_dp_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][total_system_dp]", dc.total_system_dp, :id => "discharge_total_system_dp_#{i+1}"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{i+1}][pressure_at_discharge_nozzle_dp]", dc.pressure_at_discharge_nozzle_dp, :id => "discharge_pressure_at_discharge_nozzle_dp_dp_#{i+1}"%></td>
						<td><%= link_to "X", "#", :class=>"discharge_table_close_tr", :row_id => i+1%></td>
					</tr>
					<% end%>
					<% if compressor_sizing.compressor_sizing_discharges.empty?%>
					<tr>
						<td>
							<b>1</b>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][1][id]", "", :id => "discharges_id_1" %>
						</td>
						<td>								
							<%= radio_button_tag "design_circuit", '1', false, :id =>"design_circuit_1"%>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][1][design_circuit]", "", :id => "discharge_design_circuit_1" %>
						</td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][1][process_basis_id]", options_for_select(@company.heat_and_material_balances.collect {|p| [p[:case], p[:id]]}.insert(0, '')), {:id => "discharge_process_basis_id_1", :row_id=>1}%></td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][1][destination_stream_no]", options_for_select(@streams.collect {|p| [p[:stream_no], p[:display_stream_no]]}.insert(0, '')), :id => "discharge_destination_stream_no_1", :style=>"width:100px;", :row_id=>1%></td>
						<td><input type="button" value="Circuit Piping" class="circuit_piping_btn" row_id="1"></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][destination_pressure]", "", :id => "discharge_destination_pressure_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][fitting_dp]", "", :id => "discharge_fitting_dp_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][equipment_dp]", "", :id => "discharge_equipment_dp_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][control_valve_dp]", "", :id => "discharge_control_valve_dp_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][orifice_dp]", "", :id => "discharge_orifice_dp_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][total_system_dp]", "", :id => "discharge_total_system_dp_1"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][1][pressure_at_discharge_nozzle_dp]", "", :id => "discharge_pressure_at_discharge_nozzle_dp_dp_1"%></td>
						<td><%= link_to "X", "#", :class=>"discharge_table_close_tr", :compressor_sizing_discharges_id => "0"%></td>
					</tr>
					<% end%>
				</table>
				
				<%= link_to "Add More", "#", :id => "add_new_discharge_row"%>
				
				<table class="hidden" id="new_row_discharge">
					<tr>
						<td>
							<b>#x#</b>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][id]", "", :id => "discharges_id_#x#" %>
						</td>
						<td>							
							<%= radio_button_tag "design_circuit", '#x#', false, :id =>"design_circuit_#x#"%>
							<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][design_circuit]", "", :id => "discharge_design_circuit_#x#" %>
						</td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][process_basis_id]", options_for_select(@company.heat_and_material_balances.collect {|p| [p[:case], p[:id]]}.insert(0, '')), {:id => "discharge_process_basis_id_#x#", :row_id=>"#x#"}%></td>
						<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][destination_stream_no]", options_for_select(@streams.collect {|p| [p[:stream_no], p[:display_stream_no]]}.insert(0, '')), :id => "discharge_destination_stream_no_#x#", :style=>"width:100px;", :row_id=>"#x#"%></td>
						<td><input type="button" value="Circuit Piping" class="circuit_piping_btn" row_id="#x#"></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][destination_pressure]", "", :id => "discharge_destination_pressure_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][fitting_dp]", "", :id => "discharge_fitting_dp_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][equipment_dp]", "", :id => "discharge_equipment_dp_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][control_valve_dp]", "", :id => "discharge_control_valve_dp_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][orifice_dp]", "", :id => "discharge_orifice_dp_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][total_system_dp]", "", :id => "discharge_total_system_dp_#x#"%></td>
						<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][pressure_at_discharge_nozzle_dp]", "", :id => "discharge_pressure_at_discharge_nozzle_dp_dp_#x#"%></td>
						<td><%= link_to "X", "#", :class=>"discharge_table_close_tr", :compressor_sizing_discharges_id => "#x#"%></td>
					</tr>
				</table>
			</div>
			<div id="tab3" class="tab_content">
				<!-- Centrifugal Design -->
				<%= fields_for compressor_sizing do |cs|%>
				<table width="auto">
					<tr>
						<td colspan="2">
							<fieldset style="border: 1px solid #000000;padding: 5px;width:auto;">
								<legend>Compression Path</legend>
								<%= cs.radio_button :cd_compression_path, :isentropic%>&nbsp;Isentropic&nbsp;&nbsp;
								<%= cs.radio_button :cd_compression_path, :polytropic%>&nbsp;Polytropic
							</fieldset>
						</td>						
					</tr>
					<tr>
						<td>Standard Pressure</td>
						<td><%= cs.text_field :cd_standard_pressure, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Standard Temperature</td>
						<td><%= cs.text_field :cd_standard_temperature, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Press @ Suction Nozzle</td>
						<td><%= compressor_sizing.cd_press_at_suction_nozzle%>&nbsp;<label class="pressure_general_unit"></label></td>
					</tr>
					<tr>
						<td>Press @ Discharge Nozzle</td>
						<td><%= compressor_sizing.cd_press_at_discharge_nozzle%>&nbsp;<label class="pressure_general_unit"></label></td>
					</tr>
					<tr>
						<td>Overall Differential Pressure</td>
						<td><%= compressor_sizing.cd_overall_differential_pressure%>&nbsp;<label class="pressure_differential_unit"></label></td>
					</tr>
					<tr>
						<td>Overall Compression Ratio</td>
						<td><%= compressor_sizing.cd_overall_compression_ratio%></td>
					</tr>
					<tr>
						<td>Compression Ratio Per Section</td>
						<td><%= cs.text_field :cd_compression_ratio_per_section, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Max Allowable Discharge Pressure</td>
						<td><%= cs.text_field :cd_max_allowable_discharge_pressure, :class=>"small-text-40"%></td>
					</tr>
				</table>
				
				<div class="centrifugal_designs_div">
					<div class="centrifugal_design_header" style="float:left;">
						<table style="width:auto;">
							<tr>
								<td><b>Mechanical Specification</b></td>
							</tr>
							<tr>
								<td>Section Number</td>
							</tr>
							<tr>
								<td>Compression Ratio</td>
							</tr>
							<tr>
								<td><b>Suction Conditions</b></td>
							</tr>
							<tr>
								<td>Suction Stream</td>
							</tr>
							<tr>
								<td>Suction Pressure</td>
							</tr>
							<tr>
								<td>Suction Temperature</td>
							</tr>
							<tr>
								<td>Suction Vapor MW</td>
							</tr>
							<tr>
								<td>Suction Vapor Z</td>
							</tr>							
							<tr>
								<td>Suction Vapor K</td>
							</tr>
							<tr>
								<td><b>Discharge Conditions</b></td>
							</tr>
							<tr>
								<td>Discharge Stream</td>
							</tr>
							<tr>
								<td>Discharge Pressure</td>
							</tr>
							<tr>
								<td>Discharge Temperature</td>
							</tr>
							<tr>
								<td>Discharge Vapor Z</td>
							</tr>
							<tr>
								<td>Discharge Vapor K</td>
							</tr>
							<tr>
								<td><b>Interstage System</b></td>
							</tr>
							<tr>
								<td>Interstage Piping</td>
							</tr>
							<tr>
								<td>Interstage &Delta;P</td>
							</tr>
							<tr>
								<td><b>Power Requirement</b></td>
							</tr>
							<tr>
								<td>Differential Pressure</td>
							</tr>
							<tr>
								<td>Differential Head</td>
							</tr>
							<tr>
								<td>Safety Factor</td>
							</tr>
							<tr>
								<td>Required Differential Head</td>
							</tr>
							<tr>
								<td>Max Head Stage</td>
							</tr>
							<tr>
								<td>No of Stages</td>
							</tr>
							<tr>
								<td>Head Per Impeller</td>
							</tr>
							<tr>
								<td>Efficiency</td>
							</tr>
							<tr>
								<td>Flow Rate</td>
							</tr>
							<tr>
								<td>Gas HP</td>
							</tr>
							<tr>
								<td>Mechanical Losses</td>
							</tr>
							<tr>
								<td>Brake Horsepower</td>
							</tr>
							<tr>
								<td>Normal Speed</td>
							</tr>
							<tr>
								<td>Speed</td>
							</tr>
						</table>
					</div>
					<div class="centrifugal_design_fields" style="float:left;">
						<% if compressor_sizing.compressor_centrifugal_designs.empty?%>
						<div class="centrifugal_design_field" style="float:left;">
							<table style="width:auto;">
								<tr>
									<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_centrifugal_design_field"%></td>
								</tr>
								<tr>
									<td style="text-align:center;">
										<b>1</b>
										<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][1][id]", "", :id => "compressor_centrifugal_design_id_1" %>
										<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][1][delete]", false, :id => "compressor_centrifugal_design_delete_1", :class=>"compressor_centrifugal_design_delete" %>
									</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][compression_ratio]", "", :id => "centrifugal_design_compression_ratio_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "centrifugal_design_suction_stream_1", :style=>"width:100px;"%></td>
								</tr>								
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_pressure]", "", :id => "centrifugal_design_suction_pressure_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_temperature]", "", :id => "centrifugal_design_suction_temperature_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_vapor_mw]", "", :id => "centrifugal_design_suction_vapor_mw_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_vapor_z]", "", :id => "centrifugal_design_suction_vapor_z_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][suction_vapor_k]", "", :id => "centrifugal_design_suction_vapor_k_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][1][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "centrifugal_design_discharge_stream_1", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][discharge_vapor_z]", "", :id => "centrifugal_design_discharge_vapor_z_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][discharge_vapor_k]", "", :id => "centrifugal_design_discharge_vapor_k_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><input type="button" value="Piping" class="centrifugal_design_piping_btn" row_id="1"></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][interstage_dp]", "", :id => "centrifugal_design_interstage_dp_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][efficiency]", "", :id => "centrifugal_design_efficiency_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>								
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][1][speed]", "", :id => "centrifugal_design_speed_1"%></td>
								</tr>
							</table>		
						</div>	
						<% end%>
						<% compressor_sizing.compressor_centrifugal_designs.each_with_index do |ccd, i|%>
						<div class="centrifugal_design_field" style="float:left;">
							<table style="width:auto;">
								<tr>
									<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_centrifugal_design_field"%></td>
								</tr>
								<tr>
									<td style="text-align:center;">
										<b><%= i+1%></b>
										<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][id]", ccd.id, :id => "compressor_centrifugal_design_id_#{i+1}" %>
										<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][delete]", false, :id => "compressor_centrifugal_design_delete_#{i+1}", :class=>"compressor_centrifugal_design_delete" %>
									</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][compression_ratio]", ccd.compression_ratio, :id => "centrifugal_design_compression_ratio_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, ''), ccd.suction_stream), :id => "centrifugal_design_suction_stream_#{i+1}", :style=>"width:100px;"%></td>
								</tr>								
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_pressure]", ccd.suction_pressure, :id => "centrifugal_design_suction_pressure_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_temperature]", ccd.suction_temperature, :id => "centrifugal_design_suction_temperature_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_vapor_mw]", ccd.suction_vapor_mw, :id => "centrifugal_design_suction_vapor_mw_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_vapor_z]", ccd.suction_vapor_z, :id => "centrifugal_design_suction_vapor_z_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][suction_vapor_k]", ccd.suction_vapor_k, :id => "centrifugal_design_suction_vapor_k_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, ''), ccd.discharge_stream), :id => "centrifugal_design_discharge_stream_#{i+1}", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][discharge_vapor_z]", ccd.discharge_vapor_z, :id => "centrifugal_design_discharge_vapor_z_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][discharge_vapor_k]", ccd.discharge_vapor_k, :id => "centrifugal_design_discharge_vapor_k_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><input type="button" value="Piping" class="centrifugal_design_piping_btn" row_id="<%= i+1%>"></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][interstage_dp]", ccd.interstage_dp, :id => "centrifugal_design_interstage_dp_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][efficiency]", ccd.efficiency, :id => "centrifugal_design_efficiency_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>								
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{i+1}][speed]", ccd.speed, :id => "centrifugal_design_speed_#{i+1}"%></td>
								</tr>
							</table>		
						</div>
						<% end%>						
					</div>
					<div class="clear"></div>				
				</div>
				<%= link_to "Add More", "#", :id => "add_new_centrifugal_design_column"%>
				
				<div class="hidden" id="new_centrifugal_design_field">
					<div class="centrifugal_design_field" style="float:left;">
						<table style="width:auto;">
							<tr>
								<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_centrifugal_design_field"%></td>
							</tr>
							<tr>
								<td style="text-align:center;">
									<b>#x#</b>
									<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][id]", "", :id => "compressor_centrifugal_design_id_#x#" %>
									<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][delete]", false, :id => "compressor_centrifugal_design_delete_#x#", :class=>"compressor_centrifugal_design_delete" %>
								</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compression_ratio]", "", :id => "centrifugal_design_compression_ratio_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "centrifugal_design_suction_stream_#x#", :style=>"width:100px;"%></td>
							</tr>								
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_pressure]", "", :id => "centrifugal_design_suction_pressure_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_temperature]", "", :id => "centrifugal_design_suction_temperature_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_vapor_mw]", "", :id => "centrifugal_design_suction_vapor_mw_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_vapor_z]", "", :id => "centrifugal_design_suction_vapor_z_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][suction_vapor_k]", "", :id => "centrifugal_design_suction_vapor_k_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "centrifugal_design_discharge_stream_#x#", :style=>"width:100px;"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][discharge_vapor_z]", "", :id => "centrifugal_design_discharge_vapor_z_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][discharge_vapor_k]", "", :id => "centrifugal_design_discharge_vapor_k_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><input type="button" value="Piping" class="centrifugal_design_piping_btn" row_id="#x#"></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][interstage_dp]", "", :id => "centrifugal_design_interstage_dp_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][efficiency]", "", :id => "centrifugal_design_efficiency_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][speed]", "", :id => "centrifugal_design_speed_#x#"%></td>
							</tr>
						</table>
					</div>
				</div>
				<% end%>
			</div>
			<div id="tab4" class="tab_content">
				<!-- Reciprocation Design -->
				<%= fields_for compressor_sizing do |cs|%>
				<table>
					<tr>
						<td>
							<fieldset style="border: 1px solid #000000;padding: 5px;width:auto;">
								<legend>Speed</legend>
								<%= cs.radio_button :rd_speed, :high_speed%>&nbsp;High Speed&nbsp;&nbsp;
								<%= cs.radio_button :rd_speed, :low_speed%>&nbsp;Low Speed<br>
								Overall Efficiency&nbsp;&nbsp;<%= cs.text_field :rd_over_efficiency, :class=>"small-text-40"%>
							</fieldset>
						</td>
						<td>
							<fieldset style="border: 1px solid #000000;padding: 5px;width:auto;">
								<legend>Compressor Lubrication</legend>
								<%= cs.radio_button :rd_compressor_lubrication, :lubricated%>&nbsp;Lubricated&nbsp;&nbsp;
								<%= cs.radio_button :rd_compressor_lubrication, :non_lubricated%>&nbsp;Non-Lubricated<br>
								Volumetric CF&nbsp;&nbsp;<%= cs.text_field :rd_volumetric_cf, :class=>"small-text-40"%>&nbsp;%
							</fieldset>
						</td>
						<td>
							<fieldset style="border: 1px solid #000000;padding: 5px;width:auto;">
								<legend>Gas Service</legend>
								<%= cs.radio_button :rd_gas_service, :heavy_gas%>&nbsp;Heavy Gas&nbsp;&nbsp;
								<%= cs.radio_button :rd_gas_service, :light_gas%>&nbsp;Light Gas<br>
								Volumetric CF&nbsp;&nbsp;<%= cs.text_field :rd_gs_volumetric_cf, :class=>"small-text-40"%>&nbsp;%
							</fieldset>
						</td>
					</tr>
				</table>
				
				<table style="width:auto;">					
					<tr>
						<td>Standard Pressure</td>
						<td><%= cs.text_field :rd_standard_pressure, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Standard Temperature</td>
						<td><%= cs.text_field :rd_standard_temperature, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Press @ Suction Nozzle</td>
						<td><%= compressor_sizing.rd_press_at_suction_nozzle%></td>
					</tr>
					<tr>
						<td>Press @ Discharge Nozzle</td>
						<td><%= compressor_sizing.rd_press_at_discharge_nozzle%></td>
					</tr>
					<tr>
						<td>Overall Differential Pressure</td>
						<td><%= compressor_sizing.rd_overall_differential_pressure%></td>
					</tr>
					<tr>
						<td>Overall Compression Ratio</td>
						<td><%= compressor_sizing.rd_overall_compression_ratio%></td>
					</tr>
					<tr>
						<td>Compression Ratio Per Section</td>
						<td><%= cs.text_field :rd_compression_ratio_per_section, :class=>"small-text-40"%></td>
					</tr>
					<tr>
						<td>Max Allowable Discharge Pressure</td>
						<td><%= cs.text_field :rd_max_allowable_discharge_pressure, :class=>"small-text-40"%></td>
					</tr>				
				</table>
				
				<div class="mechanical_specification_div">
					<div class="mechanical_specification_header" style="float:left;">
						<table style="width:auto;">
							<tr>
								<td><b>Mechanical Specification</b></td>
							</tr>
							<tr>
								<td>Stage Number</td>
							</tr>	
							<tr>
								<td>Compression Ratio</td>
							</tr>	
							<tr>
								<td>No of Cylinders</td>
							</tr>
							<tr>
								<td>Type</td>
							</tr>
							<tr>
								<td>Bore</td>
							</tr>
							<tr>
								<td>Stroke</td>
							</tr>
							<tr>
								<td>Rod Diameter</td>
							</tr>
							<tr>
								<td>Piston Speed</td>
							</tr>
							<tr>
								<td>Clearance</td>
							</tr>
							<tr>
								<td>Swept Volume</td>
							</tr>
							<tr>
								<td><b>Suction Conditions</b></td>
							</tr>
							<tr>
								<td>Suction Stream</td>
							</tr>
							<tr>
								<td>Suction Pressure</td>
							</tr>
							<tr>
								<td>Suction Temperature</td>
							</tr>
							<tr>
								<td>Suction Vapor MW</td>
							</tr>
							<tr>
								<td>Vapor Z</td>
							</tr>
							<tr>
								<td>Vapor K</td>
							</tr>
							<tr>
								<td><b>Discharge Conditions</b></td>
							</tr>	
							<tr>
								<td>Discharge Stream</td>
							</tr>
							<tr>
								<td>Discharge Pressure</td>
							</tr>
							<tr>
								<td>Discharge Temperature</td>
							</tr>
							<tr>
								<td>Vapor Z</td>
							</tr>
							<tr>
								<td>Vapor K</td>
							</tr>
							<tr>
								<td><b>Interstage System</b></td>
							</tr>	
							<tr>
								<td>Interstage Piping</td>
							</tr>
							<tr>
								<td>Interstage &Delta;P</td>
							</tr>
							<tr>
								<td>Suction Volume</td>
							</tr>
							<tr>
								<td>Discharge Volume</td>
							</tr>
							<tr>
								<td><b>Power Requirement</b></td>
							</tr>							
							<tr>
								<td>Piston Displacement</td>
							</tr>
							<tr>
								<td>Volumetric Efficiency</td>
							</tr>
							<tr>
								<td>Capacity</td>
							</tr>
							<tr>
								<td>Efficiency</td>
							</tr>
							<tr>
								<td>Brake Horsepower</td>							
							</tr>
						</table>						
					</div>
					<div class="mechanical_specification_fields" style="float:left;">
						<% if compressor_sizing.compressor_reciprocation_designs.empty?%>
						<div class="mechanical_specification_field" style="float:left;">							
							<table style="width:auto;">
								<tr>
									<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_mechanical_specification_field"%></td>
								</tr>
								<tr>
									<td style="text-align:center;">
										<b>1</b>
										<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][1][id]", "", :id => "compressor_reciprocation_design_id_1" %>
										<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][1][delete]", false, :id => "compressor_reciprocation_design_delete_1", :class=>"compressor_reciprocation_design_delete" %>
									</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][compression_ratio]", "", :id => "compression_ratio_1"%></td>
								</tr>	
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][no_of_cylinders]", "", :id => "no_of_cylinders_1"%></td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][1][type]", options_for_select([]), :id => "type_1", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][bore]", "", :id => "bore_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][stroke]", "", :id => "stroke_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][rod_diameter]", "", :id => "rod_diameter_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][piston_speed]", "", :id => "piston_speed_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][clearance]", "", :id => "clearance_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][swept_volume]", "", :id => "swept_volume_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "suction_stream_1", :style=>"width:100px;"%></td>
								</tr>								
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_pressure]", "", :id => "suction_pressure_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_temperature]", "", :id => "suction_temperature_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_vapor_mw]", "", :id => "suction_vapor_mw_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_vapor_z]", "", :id => "suction_vapor_z_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][suction_vapor_k]", "", :id => "suction_vapor_k_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][1][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "discharge_stream_1", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][discharge_vapor_z]", "", :id => "discharge_vapor_z_1"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][discharge_vapor_k]", "", :id => "discharge_vapor_k_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><input type="button" value="Piping" class="compressor_reciprocation_design_piping_btn" row_id="1"></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][interstage_dp]", "", :id => "interstage_dp_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][1][efficiency]", "", :id => "efficiency_1"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>													
							</table>							
						</div>
						<% end%>
						<% compressor_sizing.compressor_reciprocation_designs.each_with_index do |crd, i|%>						
						<div class="mechanical_specification_field" style="float:left;">							
							<table style="width:auto;">
								<tr>
									<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_mechanical_specification_field"%></td>
								</tr>
								<tr>
									<td style="text-align:center;">
										<b><%= i+1%></b>
										<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][id]", crd.id, :id => "compressor_reciprocation_design_id_#{i+1}" %>
										<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][delete]", false, :id => "compressor_reciprocation_design_delete_#{i+1}", :class=>"compressor_reciprocation_design_delete" %>
									</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][compression_ratio]", crd.compression_ratio, :id => "compression_ratio_#{i+1}"%></td>
								</tr>	
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][no_of_cylinders]", crd.no_of_cylinders, :id => "no_of_cylinders_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][type]", options_for_select([], crd.type), :id => "type_#{i+1}", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][bore]", crd.bore, :id => "bore_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][stroke]", crd.stroke, :id => "stroke_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][rod_diameter]", crd.rod_diameter, :id => "rod_diameter_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][piston_speed]", crd.piston_speed, :id => "piston_speed_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][clearance]", crd.clearance, :id => "clearance_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][swept_volume]", crd.swept_volume, :id => "swept_volume_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, ''), crd.suction_stream), :id => "suction_stream_#{i+1}", :style=>"width:100px;"%></td>
								</tr>								
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_pressure]", crd.suction_pressure, :id => "suction_pressure_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_temperature]", crd.suction_temperature, :id => "suction_temperature_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_vapor_mw]", crd.suction_vapor_mw, :id => "suction_vapor_mw_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_vapor_z]", crd.suction_vapor_z, :id => "suction_vapor_z_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][suction_vapor_k]", crd.suction_vapor_k, :id => "suction_vapor_k_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, ''), crd.discharge_stream), :id => "discharge_stream_#{i+1}", :style=>"width:100px;"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][discharge_vapor_z]", crd.discharge_vapor_z, :id => "discharge_vapor_z_#{i+1}"%></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][discharge_vapor_k]", crd.discharge_vapor_k, :id => "discharge_vapor_k_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><input type="button" value="Piping" class="compressor_reciprocation_design_piping_btn" row_id="<%= i+1%>"></td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][interstage_dp]", crd.interstage_dp, :id => "interstage_dp_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>
								<tr>
									<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{i+1}][efficiency]", crd.efficiency, :id => "efficiency_#{i+1}"%></td>
								</tr>
								<tr>
									<td>&nbsp;</td>
								</tr>									
							</table>
						</div>
						<% end%>						
					</div>
					<div class="clear"></div>
				</div>
				<%= link_to "Add More", "#", :id => "add_new_mechanical_specification_column"%>
				
				<div class="hidden" id="new_mechanical_specification_field">
					<div class="mechanical_specification_field" style="float:left;">
						<table style="width:auto;">
							<tr>
								<td style="text-align:right;"><%= link_to "x", "#", :class=>"close_mechanical_specification_field"%></td>
							</tr>
							<tr>
								<td style="text-align:center;">
									<b>#x#</b>
									<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][id]", "", :id => "compressor_reciprocation_design_id_#x#" %>
									<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][delete]", false, :id => "compressor_reciprocation_design_delete_#x#", :class=>"compressor_reciprocation_design_delete" %>
								</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compression_ratio]", "", :id => "compression_ratio_#x#"%></td>
							</tr>	
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][no_of_cylinders]", "", :id => "no_of_cylinders_#x#"%></td>
							</tr>
							<tr>
								<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][type]", options_for_select([]), :id => "type_#x#", :style=>"width:100px;"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][bore]", "", :id => "bore_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][stroke]", "", :id => "stroke_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][rod_diameter]", "", :id => "rod_diameter_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][piston_speed]", "", :id => "piston_speed_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][clearance]", "", :id => "clearance_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][swept_volume]", "", :id => "swept_volume_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "suction_stream_#x#", :style=>"width:100px;"%></td>
							</tr>								
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_pressure]", "", :id => "suction_pressure_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_temperature]", "", :id => "suction_temperature_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_vapor_mw]", "", :id => "suction_vapor_mw_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_vapor_z]", "", :id => "suction_vapor_z_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][suction_vapor_k]", "", :id => "suction_vapor_k_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][discharge_stream]", options_for_select(Stream.get_stream_nos_by_process_basis(compressor_sizing.process_basis_id).collect{|p| [p.display_stream_no, p.stream_no]}.insert(0, '')), :id => "discharge_stream_#x#", :style=>"width:100px;"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][discharge_vapor_z]", "", :id => "discharge_vapor_z_#x#"%></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][discharge_vapor_k]", "", :id => "discharge_vapor_k_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><input type="button" value="Piping" class="compressor_reciprocation_design_piping_btn" row_id="#x#"></td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][interstage_dp]", "", :id => "interstage_dp_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>
							<tr>
								<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][efficiency]", "", :id => "efficiency_#x#"%></td>
							</tr>
							<tr>
								<td>&nbsp;</td>
							</tr>													
						</table>							
					</div>
				</div>				
				<% end%>
			</div>
			<div id="tab5" class="tab_content">
				<!-- Settle Out -->
				<%= fields_for compressor_sizing do |cs|%>
				<table width="100%">
					<tr>
						<td colspan="2"><b><u>Suction Side</u></b></td>
						<td colspan="2"><b><u>Discharge Side</u></b></td>
					</tr>
					<tr>
						<td width="25%">Total Volume</td>
						<td width="25%"><%= compressor_sizing.so_ss_total_volume%>&nbsp;m&sup3;</td>
						<td width="25%">Total Volume</td>
						<td width="25%"><%= compressor_sizing.so_ds_total_volume%>&nbsp;m&sup3;</td>
					</tr>
					<tr>
						<td>Total Moles</td>
						<td><%= compressor_sizing.so_ss_total_moles%>&nbsp;mol</td>
						<td>Total Moles</td>
						<td><%= compressor_sizing.so_ds_total_moles%>&nbsp;mol</td>
					</tr>
					<tr>
						<td colspan="4"><b><u>Design Conditions</u></b></td>						
					</tr>
					<tr>
						<td>System Volume</td>
						<td><%= compressor_sizing.so_system_volume%>&nbsp;m&sup3;</td>
						<td>Settle Out Pressure</td>
						<td><%= compressor_sizing.so_settle_out_pressure%>&nbsp;barg</td>
					</tr>
					<tr>
						<td>System Mole</td>
						<td><%= compressor_sizing.so_system_mole%>&nbsp;mol</td>
						<td>Settle Out Temperature</td>
						<td><%= compressor_sizing.so_settle_out_temperature%>&nbsp;&deg;C</td>
					</tr>
					<tr>
						<td colspan="2"></td>
						<td><input type="button" value="Enter System Piping"></td>
						<td><input type="button" value="Calculate"></td>
					</tr>
					<tr>
						<td colspan="4"><b><u>Note</u></b></td>
					</tr>
					<tr>
						<td colspan="4"><%= cs.text_area :so_notes, :size=>"158x6"%></td>
					</tr>
				</table>
				<% end%>
			</div>
			<div id="tab6" class="tab_content">
				<!-- CV Summary -->
				<table>
					<tr>
						<td><b><u>No.</u></b></td>
						<td><b><u>Circuit</u></b></td>
						<td><b><u>Control Value Tag</u></b></td>
						<td><b><u>Inlet<br/>Pressure</u></b></td>
						<td><b><u>Outlet<br/>Pressure</u></b></td>
						<td><b><u>CV Delta P</u></b></td>
						<td><b><u>Density</u></b></td>
						<td><b><u>CV</u></b></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>
						<td><label class="pressure_general_unit"></label></td>
						<td><label class="pressure_general_unit"></label></td>
						<td><label class="pressure_differential_unit"></label></td>
						<td><label class="density_general_unit"></label></td>
						<td></td>
					</tr>
				</table>
			</div>
			<div id="tab7" class="tab_content">
				<!-- FE Summary -->
				<table>
					<tr>
						<td><b><u>No.</u></b></td>
						<td><b><u>Circuit</u></b></td>
						<td><b><u>Flow Element Tag</u></b></td>
						<td><b><u>Inlet<br/>Pressure</u></b></td>
						<td><b><u>Outlet<br/>Pressure</u></b></td>
						<td><b><u>FE Delta P</u></b></td>
						<td><b><u>Density</u></b></td>
						<td><b><u>Diameter</u></b></td>
					</tr>
					<tr>
						<td></td>
						<td></td>
						<td></td>						
						<td><label class="pressure_general_unit"></label></td>
						<td><label class="pressure_general_unit"></label></td>
						<td><label class="pressure_differential_unit"></label></td>
						<td><label class="density_general_unit"></label></td>
						<td>mm</td>
					</tr>
				</table>
			</div>
			<div id="tab8" class="tab_content">
				<!-- Review -->
				<%= fields_for compressor_sizing do |cs|%>
				<table>
					<tr>
						<td>
							Fans are used to raise the pressure by about 3%[12 in. (30 cm) water], blowers raise to less
							than 2.75 barg (40 psig), and compressors to higher pressures, although the blower ranges is
							commonly included in the compressor range.
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_1, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_1, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_1, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							<table>
								<tr>
									<td colspan="2">For Vacuum pumps use the following:</td>
								</tr>
								<tr>
									<td>Reciprocating piston type</td>
									<td>down to 1333.3 Pa(1 torr)</td>
								</tr>
								<tr>
									<td>Rotary piston type</td>
									<td>down to 0.133 Pa(0.001 torr)</td>
								</tr>
								<tr>
									<td>Two lobe rotraty type</td>
									<td>down to 0.0133 Pa(0.0001 torr)</td>
								</tr>
								<tr>
									<td>stream jet ejectors</td>
									<td>1 stage down to 13.3 kPa (100 torr)</td>
								</tr>
								<tr>
									<td></td>
									<td>3 stage down to 133.3 Pa (1 torr)</td>
								</tr>
								<tr>
									<td></td>
									<td>5 stage down to 6.7 Pa (0.05 torr)</td>
								</tr>
							</table>
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_2, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_2, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_2, "na"%>&nbsp;N/A&nbsp;
						</td>						
					</tr>
					<tr>
						<td>
							A three stage ejector needs 100 kg stream/kg air to maitain a pressure of 133.3 Pa (1 torr)
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_3, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_3, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_3, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							In-leakage of ari evacuated equipment depends on the absolute pressure (torr) and the
							volume of the equipment, V in m3 (ft3), according to W = kV^(2/3) kg/hr (lb/hr), with k = 0.98
							(0.2) when P > 90 torr, k = 0.39 (0.08) when P is between 0.4 and 2.67 kPa (3 and 20 torr),
							and k = 0.12 (0.025) at p less than 133.3 Pa (1 torr)
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_4, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_4, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_4, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Theorectical adiabatic horsepower<br>
							THP = ((SCFM) T1)/8130a [(P2/P1)^a-1]<br>
							where T1 is inlet temperature in Rankine, R = F + 460 and a = (k-1)/k, k = Cp/Cv. Theoretical
							reversible adiabatic power = mz1RT1[(P2/P1)^a - 1]/a Where T1 is inlet temperature, R = Gas
							Constant, z1 = comprssibility factor, m = molar flow rate a = (k-1)/k and k = Cp/Cv. Values of
							R = 8.314 J/mol k = 1.987 Btu/lbmol R = 0.7302 atm ft3/lb mol F.
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_5, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_5, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_5, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Outlet temperature for reverisble adiabatic process<br>
							T2 = T1(P2/P1)^a
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_6, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_6, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_6, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							To Compress air from 37.8 C (100 F), k = 1.4, compression ratio = 3, theoretical power required 
							= 62 hp/million ft3/day, outlet temperature 152.2 C (306 F)											
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_7, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_7, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_7, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Exit temperature should not exceed 167-204 C (350 - 400 F); for diatomic gases (Cp/Cv = 1.4),
							this corresponds to a compression ration of about 4.
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_8, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_8, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_8, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Compression ratio should be about the same for each stage of a multistage unit, ratio = 
							(Pa/Pa)^(1/n), with n stages	
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_9, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_9, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_9, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Efficiencies of reciprocating compressors: 65% at compression ratio of 1.5, 75% at 2.0 and 80
							-85% at 3-6.
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_10, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_10, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_10, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Efficiencies of large centrifugal compressors, 2.83-47.2 m&sup3/s (6000 - 100,000 acfm) at suction,
							are 76 - 78%.
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_11, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_11, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_11, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>
					<tr>
						<td>
							Rotary compressors have efficencies of 70%, except liquid liner types which have 50%
						</td>
						<td width="150px">
							<%= cs.radio_button :cs_sizing_review_12, "yes"%>&nbsp;Yes&nbsp;
							<%= cs.radio_button :cs_sizing_review_12, "no"%>&nbsp;No&nbsp;
							<%= cs.radio_button :cs_sizing_review_12, "na"%>&nbsp;N/A&nbsp;
						</td>
					</tr>		
					<tr>
						<td colspan="2"><b><u>NOTES</u></b></td>
					</tr>
					<tr>
						<td colspan="2"><%= cs.text_area :cs_notes, :size=>"140x8"%></td>
					</tr>
				</table>
				<% end%>
			</div>					
		</div>
		<div class="clear"></div>	
	</div>
	
	<!-- SUCTION PIPING -->
	<div style="display:none;">
		<div id="suction_piping_box">
			<table id="suction_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="suction_pipings_pipe_id_unit"></label></th>
                    <th><label class="suction_pipings_length_unit"></label></th>
                    <th><label class="suction_pipings_elev_unit"></label></th>
                    <th><label class="suction_pipings_delta_p_unit"></label></th>
				</tr>				
				<% compressor_sizing.suction_pipings.where(:tab=>"suction").each_with_index do |sp, i|%>
				<tr>
					<td>
						<%= i+1%>
						<%= hidden_field_tag "compressor_sizing[suction_pipings][#{i+1}][id]", sp.id, :id => "suction_pipings_id_#{i+1}" %>
						<%= hidden_field_tag "compressor_sizing[suction_pipings][#{i+1}][tab]", "suction", :id => "suction_pipings_tab_#{i+1}" %>
					</td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#{i+1}][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, ''), sp.fitting), :id => "suction_pipings_fitting_#{i+1}", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][fitting_tag]", sp.fitting_tag, :id => "suction_pipings_fitting_tag_#{i+1}"%></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#{i+1}][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, ''), sp.pipe_size), :id => "suction_pipings_pipe_size_#{i+1}", :class => "suction_pipings_pipe_size", :row_id =>"#{i+1}"%></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#{i+1}][pipe_schedule]", options_for_select(PipeSizing.pipe_size_schedules[sp.pipe_size.to_s], sp.pipe_schedule), :id => "suction_pipings_pipe_schedule_#{i+1}", :class=>"suction_pipings_pipe_schedule", :row_id=>"#{i+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][pipe_id]", sp.pipe_id, :id => "suction_pipings_pipe_id_#{i+1}", :class => "suction_pipings_pipe_id" %></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][per_flow]", sp.per_flow, :id => "suction_pipings_per_flow_#{i+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][ds_cv]", sp.ds_cv, :id => "suction_pipings_ds_cv_#{i+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][length]", sp.length, :id => "suction_pipings_length_#{i+1}", :class => "suction_pipings_length"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][elev]", sp.elev, :id => "suction_pipings_elev_#{i+1}", :class => "suction_pipings_elev"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#{i+1}][delta_p]", sp.delta_p, :id => "suction_pipings_delta_p_#{i+1}", :class => "suction_pipings_delta_p"%></td>
					<td><%= link_to "X", "#", :class => "compressor_sizing_close_tr", :suction_piping_id => "#{i+1}"%></td>
				</tr>
				<% end%>
				<% if compressor_sizing.suction_pipings.where(:tab=>"suction").empty?%>
				<tr>
					<td>
						1
						<%= hidden_field_tag "compressor_sizing[suction_pipings][1][id]", "", :id => "suction_pipings_id_1" %>
						<%= hidden_field_tag "compressor_sizing[suction_pipings][1][tab]", "suction", :id => "suction_pipings_tab_1" %>
					</td>
					<td><%= select_tag "compressor_sizing[suction_pipings][1][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "suction_pipings_fitting_1", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][fitting_tag]", "", :id => "suction_pipings_fitting_tag_1"%></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][1][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "suction_pipings_pipe_size_1", :class => "suction_pipings_pipe_size", :row_id =>"1" %></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][1][pipe_schedule]", options_for_select([]), :id => "suction_pipings_pipe_schedule_1", :class => "suction_pipings_pipe_schedule", :row_id =>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][pipe_id]", "", :id => "suction_pipings_pipe_id_1", :class =>"suction_pipings_pipe_id"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][per_flow]", "", :id => "suction_pipings_per_flow_1"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][ds_cv]", "", :id => "suction_pipings_ds_cv_1"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][length]", "", :id => "suction_pipings_length_1", :class => "suction_pipings_length"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][elev]", "", :id => "suction_pipings_elev_1", :class => "suction_pipings_elev"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][1][delta_p]", "", :id => "suction_pipings_delta_p_1", :class => "suction_pipings_delta_p"%></td>
					<td><%= link_to "X", "#", :class => "compressor_sizing_close_tr", :suction_piping_id => 1%></td>
				</tr>
				<% end%>
			</table>
			<br>
			<%= link_to "Add", "#", :id => "add_new_suction_piping"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :id => "close_suction_piping"%>
			<!-- new suction piping tr-->
			<table id="new_suction_piping_tr" class="hidden">
				<tr>
					<td>
						#x#
						<%= hidden_field_tag "compressor_sizing[suction_pipings][#x#][id]", "", :id => "suction_pipings_id_#x#" %>
						<%= hidden_field_tag "compressor_sizing[suction_pipings][#x#][tab]", "suction", :id => "suction_pipings_tab_#x#" %>
					</td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#x#][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "suction_pipings_fitting_#x#", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][fitting_tag]", "", :id => "suction_pipings_fitting_tag_#x#"%></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#x#][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "suction_pipings_pipe_size_#x#", :class=> "suction_pipings_pipe_size", :row_id =>"#x#"%></td>
					<td><%= select_tag "compressor_sizing[suction_pipings][#x#][pipe_schedule]", options_for_select([]), :id => "suction_pipings_pipe_schedule_#x#", :class=>"suction_pipings_pipe_schedule", :row_id=>"#x#"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][pipe_id]", "", :id => "suction_pipings_pipe_id_#x#", :class =>"suction_pipings_pipe_id"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][per_flow]", "", :id => "suction_pipings_per_flow_#x#"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][ds_cv]", "", :id => "suction_pipings_ds_cv_#x#"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][length]", "", :id => "suction_pipings_length_#x#", :class => "suction_pipings_length"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][elev]", "", :id => "suction_pipings_elev_#x#", :class => "suction_pipings_elev"%></td>
					<td><%= text_field_tag "compressor_sizing[suction_pipings][#x#][delta_p]", "", :id => "suction_pipings_delta_p_#x#", :class => "suction_pipings_delta_p"%></td>
					<td><%= link_to "X", "#", :class => "compressor_sizing_close_tr", :suction_piping_id => 0%></td>
				</tr>
			</table>
		</div>
	</div>
	
	<!-- DISCHARGE CIRCUIT PIPING -->
	<div style="display:none;" id="discharge_circuit_piping_div">
		<div id="discharge_circuit_piping_box_#x#">
			<table class="discharge_circuit_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="discharge_circuit_piping_pipe_id_unit"></label></th>
                    <th><label class="discharge_circuit_piping_length_unit"></label></th>
                    <th><label class="discharge_circuit_piping_elev_unit"></label></th>
                    <th><label class="discharge_circuit_piping_delta_p_unit"></label></th>
					<th><label class="discharge_circuit_piping_inlet_pressure_unit"></label></th>
				</tr>
				<tr>
					<td>
						1
						<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][id]", "", :id => "discharge_circuit_piping_id_1" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "discharge_circuit_piping_fitting_1", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][fitting_tag]", "", :id => "discharge_circuit_piping_fitting_tag_1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "discharge_circuit_piping_pipe_size_1", :class=>"discharge_circuit_piping_pipe_size", :row_id => "1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][pipe_schedule]", options_for_select([]), :id => "discharge_circuit_piping_pipe_schedule_1", :class=>"discharge_circuit_piping_pipe_schedule", :row_id=>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][pipe_id]", "", :id => "discharge_circuit_piping_pipe_id_1", :class => "discharge_circuit_piping_pipe_id", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][per_flow]", "", :id => "discharge_circuit_piping_per_flow_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][ds_cv]", "", :id => "discharge_circuit_piping_ds_cv_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][length]", "", :id => "discharge_circuit_piping_length_1", :class => "discharge_circuit_piping_length", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][elev]", "", :id => "discharge_circuit_piping_elev_1", :class => "discharge_circuit_piping_elev", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][1][delta_p]", "", :id => "discharge_circuit_piping_delta_p_1", :class => "discharge_circuit_piping_delta_p", :row_id => "1"%></td>
					<td><%= label_tag "inlet_pressure", "", :class=>"discharge_circuit_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "discharge_circuit_piping_close_tr", :row_id => 1%></td>
				</tr>
			</table>
			
			<%= link_to "Add More", "#", :class=>"discharge_circuit_piping_add_more", :table_id=>"#x#"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"discharge_circuit_piping_close"%>
		</div>
		
		<table id="discharge_circuit_pipings_tr">
			<tr>
				<td>
					#y#
					<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][id]", "", :id => "discharge_circuit_piping_id_#y#" %>
				</td>
				<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "discharge_circuit_piping_fitting_#y#", :style=>"width:200px;"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][fitting_tag]", "", :id => "discharge_circuit_piping_fitting_tag_#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "discharge_circuit_piping_pipe_size_#y#", :class=>"discharge_circuit_piping_pipe_size", :row_id=>"#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][pipe_schedule]", options_for_select([]), :id => "discharge_circuit_piping_pipe_schedule_#y#", :class  =>"discharge_circuit_piping_pipe_schedule", :row_id =>"#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][pipe_id]", "", :id => "discharge_circuit_piping_pipe_id_#y#", :class => "discharge_circuit_piping_pipe_id", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][per_flow]", "", :id => "discharge_circuit_piping_per_flow_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][ds_cv]", "", :id => "discharge_circuit_piping_ds_cv_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][length]", "", :id => "discharge_circuit_piping_length_#y#", :class => "discharge_circuit_piping_length", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][elev]", "", :id => "discharge_circuit_piping_elev_#y#", :class => "discharge_circuit_piping_elev", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#x#][discharge_circuit_pipings][#y#][delta_p]", "", :id => "discharge_circuit_piping_delta_p_#y#", :class => "discharge_circuit_piping_delta_p", :row_id => "#y#"%></td>
				<td><%= label_tag "inlet_pressure", "", :class=>"discharge_circuit_piping_inlet_pressure"%></td>
				<td><%= link_to "X", "#", :class => "discharge_circuit_piping_close_tr", :row_id => 1%></td>
			</tr>
		</table>
	</div>
	
	<!-- list of discharge circuit piping -->
	<div id="list_of_discharge_circuit_piping" style="display:none;">
	<% compressor_sizing.compressor_sizing_discharges.each_with_index do |csd, i|%>
		<% csd_row_id = i+1%>
		<% if csd.discharge_circuit_piping.empty?%>		
			<% next%>
		<% end%>		
		<div id="discharge_circuit_piping_box_<%= csd_row_id%>">			
			<table class="discharge_circuit_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="discharge_circuit_piping_pipe_id_unit"></label></th>
                    <th><label class="discharge_circuit_piping_length_unit"></label></th>
                    <th><label class="discharge_circuit_piping_elev_unit"></label></th>
                    <th><label class="discharge_circuit_piping_delta_p_unit"></label></th>
					<th><label class="discharge_circuit_piping_inlet_pressure_unit"></label></th>
				</tr>
				<% csd.discharge_circuit_piping.each_with_index do |dcp, j|%>				
				<tr>
					<td>
						<%= j+1%>						
						<%= hidden_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][id]", dcp.id, :id => "discharge_circuit_piping_id_#{j+1}" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, ''), dcp.fitting), :id => "discharge_circuit_piping_fitting_#{j+1}", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][fitting_tag]", dcp.fitting_tag, :id => "discharge_circuit_piping_fitting_tag_#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, ''), dcp.pipe_size), :id => "discharge_circuit_piping_pipe_size_#{j+1}", :class => "discharge_circuit_piping_pipe_size", :row_id => "#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][pipe_schedule]", options_for_select(PipeSizing.pipe_schedules.collect {|p| [raw(p[:name]), p[:id]]}.insert(0, ''), dcp.pipe_schedule), :id => "discharge_circuit_piping_pipe_schedule_#{j+1}",:class => "discharge_circuit_piping_pipe_schedule", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][pipe_id]", dcp.pipe_id, :id => "discharge_circuit_piping_pipe_id_#{j+1}", :class => "discharge_circuit_piping_pipe_id", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][per_flow]", dcp.per_flow, :id => "discharge_circuit_piping_per_flow_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][ds_cv]", dcp.ds_cv, :id => "discharge_circuit_piping_ds_cv_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][length]", dcp.length, :id => "discharge_circuit_piping_length_#{j+1}", :class => "discharge_circuit_piping_length", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][elev]", dcp.elev, :id => "discharge_circuit_piping_elev_#{j+1}", :class => "discharge_circuit_piping_elev", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_sizing_discharges][#{csd_row_id}][discharge_circuit_pipings][#{j+1}][delta_p]", dcp.delta_p, :id => "discharge_circuit_piping_delta_p_#{j+1}", :class => "discharge_circuit_piping_delta_p", :row_id => "#{j+1}"%></td>
					<td><%= label_tag "inlet_pressure", "", :class=>"discharge_circuit_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "discharge_circuit_piping_close_tr", :row_id => "#{j+1}"%></td>
				</tr>
				<% end%>				
			</table>
			
			<%= link_to "Add More", "#", :class=>"discharge_circuit_piping_add_more", :table_id=>csd_row_id%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"discharge_circuit_piping_close"%>						
		</div>
	<% end%>	
	</div>
	
	<!-- compressor centrifugal design pipings -->
	<div style="display:none;" id="centrifugal_design_piping_div">
		<div id="centrifugal_design_piping_box_#x#">
			<table class="centrifugal_design_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="compressor_centrifugal_design_piping_pipe_id_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_length_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_elev_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_delta_p_unit"></label></th>
					<th><label class="compressor_centrifugal_design_piping_inlet_pressure_unit"></label></th>
				</tr>
				<tr>
					<td>
						1
						<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][id]", "", :id => "compressor_centrifugal_design_piping_id_1" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "compressor_centrifugal_design_piping_fitting_1", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][fitting_tag]", "", :id => "compressor_centrifugal_design_piping_fitting_tag_1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "compressor_centrifugal_design_piping_pipe_size_1", :class=>"compressor_centrifugal_design_piping_pipe_size", :row_id=>"1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][pipe_schedule]", options_for_select([]), :id => "compressor_centrifugal_design_piping_pipe_schedule_1", :class=>"compressor_centrifugal_design_piping_pipe_schedule", :row_id=>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][pipe_id]", "", :id => "compressor_centrifugal_design_piping_pipe_id_1", :class=> "compressor_centrifugal_design_piping_pipe_id", :row_id =>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][per_flow]", "", :id => "compressor_centrifugal_design_piping_per_flow_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][ds_cv]", "", :id => "compressor_centrifugal_design_piping_ds_cv_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][length]", "", :id => "compressor_centrifugal_design_piping_length_1", :class=>"compressor_centrifugal_design_piping_length", :row_id=>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][elev]", "", :id => "compressor_centrifugal_design_piping_elev_1", :class=>"compressor_centrifugal_design_piping_elev", :row_id=>"1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][1][delta_p]", "", :id => "compressor_centrifugal_design_piping_delta_p_1", :class=>"compressor_centrifugal_design_piping_delta_p", :row_id=>"1"%></td>
					<td><%= label_tag "inlet_pressure", "",:class=> "compressor_centrifugal_design_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "centrifugal_design_piping_close_tr", :row_id => 1%></td>
				</tr>
			</table>
			
			<%= link_to "Add More", "#", :class=>"centrifugal_design_piping_box_add_more", :table_id=>"#x#"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"centrifugal_design_piping_close"%>
		</div>
		
		<table id="compressor_centrifugal_design_piping_tr">
			<tr>
				<td>
					#y#
					<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][id]", "", :id => "compressor_centrifugal_design_piping_id_#y#" %>
				</td>
				<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "compressor_centrifugal_design_piping_fitting_#y#", :style=>"width:200px;"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][fitting_tag]", "", :id => "compressor_centrifugal_design_piping_fitting_tag_#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "compressor_centrifugal_design_piping_pipe_size_#y#", :class=>"compressor_centrifugal_design_piping_pipe_size", :row_id=>"#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][pipe_schedule]", options_for_select([]), :id => "compressor_centrifugal_design_piping_pipe_schedule_#y#", :class=>"compressor_centrifugal_design_piping_pipe_schedule", :row_id=>"#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][pipe_id]", "", :id => "compressor_centrifugal_design_piping_pipe_id_#y#", :class=>"compressor_centrifugal_design_piping_pipe_id", :row_id=>"#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][per_flow]", "", :id => "compressor_centrifugal_design_piping_per_flow_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][ds_cv]", "", :id => "compressor_centrifugal_design_piping_ds_cv_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][length]", "", :id => "compressor_centrifugal_design_piping_length_#y#", :class=>"compressor_centrifugal_design_piping_length", :row_id=>"#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][elev]", "", :id => "compressor_centrifugal_design_piping_elev_#y#", :class=>"compressor_centrifugal_design_piping_elev", :row_id=>"#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#x#][compressor_centrifugal_design_pipings][#y#][delta_p]", "", :id => "compressor_centrifugal_design_piping_delta_p_#y#", :class=>"compressor_centrifugal_design_piping_delta_p", :row_id=>"#y#"%></td>
				<td><%= label_tag "inlet_pressure", "",:class=>"compressor_centrifugal_design_piping_inlet_pressure"%></td>
				<td><%= link_to "X", "#", :class => "centrifugal_design_piping_close_tr", :row_id => "#y#"%></td>
			</tr>
		</table>		
	</div>
	
	<!-- list of discharge circuit piping -->
	<div id="list_of_centrifugal_design_piping" style="display:none;">
	<% compressor_sizing.compressor_centrifugal_designs.each_with_index do |ccd, i|%>
		<% ccd_row_id = i+1%>
		<% if ccd.compressor_centrifugal_design_pipings.empty?%>		
			<% next%>
		<% end%>
		<div id="centrifugal_design_piping_box_<%= ccd_row_id%>">			
			<table class="centrifugal_design_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="compressor_centrifugal_design_piping_pipe_id_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_length_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_elev_unit"></label></th>
                    <th><label class="compressor_centrifugal_design_piping_delta_p_unit"></label></th>
					<th><label class="compressor_centrifugal_design_piping_inlet_pressure_unit"></label></th>
				</tr>				
				<% ccd.compressor_centrifugal_design_pipings.each_with_index do |ccdp, j|%>							
				<tr>
					<td>
						<%= j+1%>						
						<%= hidden_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][id]", ccdp.id, :id => "compressor_centrifugal_design_piping_id_#{j+1}" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, ''), ccdp.fitting), :id => "compressor_centrifugal_design_piping_fitting_#{j+1}", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][fitting_tag]", ccdp.fitting_tag, :id => "discharge_circuit_piping_fitting_tag_#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, ''), ccdp.pipe_size), :id => "compressor_centrifugal_design_piping_pipe_size_#{j+1}", :class=>"compressor_centrifugal_design_piping_pipe_size", :row_id=>"#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][pipe_schedule]", options_for_select(PipeSizing.pipe_size_schedules[ccdp.pipe_size.to_s], ccdp.pipe_schedule), :id => "compressor_centrifugal_design_piping_pipe_schedule_#{j+1}", :class=>"compressor_centrifugal_design_piping_pipe_schedule", :row_id=>"#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][pipe_id]", ccdp.pipe_id, :id => "compressor_centrifugal_design_piping_pipe_id_#{j+1}", :class=>"compressor_centrifugal_design_piping_pipe_id", :row_id=>"#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][per_flow]", ccdp.per_flow, :id => "compressor_centrifugal_design_piping_per_flow_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][ds_cv]", ccdp.ds_cv, :id => "compressor_centrifugal_design_piping_ds_cv_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][length]", ccdp.length, :id => "compressor_centrifugal_design_piping_length_#{j+1}", :class=>"compressor_centrifugal_design_piping_length", :row_id=>"#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][elev]", ccdp.elev, :id => "compressor_centrifugal_design_piping_elev_#{j+1}", :class=>"compressor_centrifugal_design_piping_elev", :row_id=>"#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_centrifugal_designs][#{ccd_row_id}][compressor_centrifugal_design_pipings][#{j+1}][delta_p]", ccdp.delta_p, :id => "compressor_centrifugal_design_piping_delta_p_#{j+1}", :class=>"compressor_centrifugal_design_piping_delta_p", :row_id=>"#{j+1}"%></td>
					<td><%= label_tag "inlet_pressure", "", :class=>"compressor_centrifugal_design_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "centrifugal_design_piping_close_tr", :row_id => "#{j+1}"%></td>
				</tr>
				<% end%>				
			</table>
			
			<%= link_to "Add More", "#", :class=>"centrifugal_design_piping_box_add_more", :table_id=>"#{ccd_row_id}"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"centrifugal_design_piping_close"%>						
		</div>
	<% end%>
	</div>	
	
	<!-- compressor reciprocation design pipings -->
	<div style="display:none;" id="reciprocation_design_piping_div">
		<div id="reciprocation_design_piping_box_#x#">
			<table class="reciprocation_design_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="compressor_reciprocation_design_piping_pipe_id_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_length_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_elev_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_delta_p_unit"></label></th>
					<th><label class="compressor_reciprocation_design_piping_inlet_pressure_unit"></label></th>
				</tr>
				<tr>
					<td>
						1
						<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][id]", "", :id => "compressor_reciprocation_design_piping_id_1" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "compressor_reciprocation_design_piping_fitting_1", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][fitting_tag]", "", :id => "compressor_reciprocation_design_piping_fitting_tag_1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "compressor_reciprocation_design_piping_pipe_size_1",:class =>"compressor_reciprocation_design_piping_pipe_size", :row_id => "1"%></td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][pipe_schedule]", options_for_select([]), :id => "compressor_reciprocation_design_piping_pipe_schedule_1", :class =>"compressor_reciprocation_design_piping_pipe_schedule", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][pipe_id]", "", :id => "compressor_reciprocation_design_piping_pipe_id_1",:class =>"compressor_reciprocation_design_piping_pipe_id", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][per_flow]", "", :id => "compressor_reciprocation_design_piping_per_flow_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][ds_cv]", "", :id => "compressor_reciprocation_design_piping_ds_cv_1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][length]", "", :id => "compressor_reciprocation_design_piping_length_1",:class =>"compressor_reciprocation_design_piping_length", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][elev]", "", :id => "compressor_reciprocation_design_piping_elev_1",:class =>"compressor_reciprocation_design_piping_elev", :row_id => "1"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][1][delta_p]", "", :id => "compressor_reciprocation_design_piping_delta_p_1",:class =>"compressor_reciprocation_design_piping_delta_p", :row_id => "1"%></td>
					<td><%= label_tag "inlet_pressure", "",:class =>"compressor_reciprocation_design_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "reciprocation_design_piping_close_tr", :row_id => 1%></td>
				</tr>
			</table>
			
			<%= link_to "Add More", "#", :class=>"reciprocation_design_piping_box_add_more", :table_id=>"#x#"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"reciprocation_design_piping_close"%>
		</div>
		
		<table id="compressor_reciprocation_design_piping_tr">
			<tr>
				<td>
					#y#
					<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][id]", "", :id => "compressor_reciprocation_design_piping_id_#y#" %>
				</td>
				<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, '')), :id => "compressor_reciprocation_design_piping_fitting_#y#", :style=>"width:200px;"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][fitting_tag]", "", :id => "compressor_reciprocation_design_piping_fitting_tag_#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, '')), :id => "compressor_reciprocation_design_piping_pipe_size_#y#",:class =>"compressor_reciprocation_design_piping_pipe_size", :row_id => "#y#"%></td>
				<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][pipe_schedule]", options_for_select([]), :id => "compressor_reciprocation_design_piping_pipe_schedule_#y#", :class =>"compressor_reciprocation_design_piping_pipe_schedule", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][pipe_id]", "", :id => "compressor_reciprocation_design_piping_pipe_id_#y#", :class =>"compressor_reciprocation_design_piping_pipe_id", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][per_flow]", "", :id => "compressor_reciprocation_design_piping_per_flow_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][ds_cv]", "", :id => "compressor_reciprocation_design_piping_ds_cv_#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][length]", "", :id => "compressor_reciprocation_design_piping_length_#y#",:class =>"compressor_reciprocation_design_piping_length", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][elev]", "", :id => "compressor_reciprocation_design_piping_elev_#y#",:class =>"compressor_reciprocation_design_piping_elev", :row_id => "#y#"%></td>
				<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#x#][compressor_reciprocation_design_pipings][#y#][delta_p]", "", :id => "compressor_reciprocation_design_piping_delta_p_#y#",:class =>"compressor_reciprocation_design_piping_delta_p", :row_id => "#y#"%></td>
				<td><%= label_tag "inlet_pressure", "",:class =>"compressor_reciprocation_design_piping_inlet_pressure"%></td>
				<td><%= link_to "X", "#", :class => "reciprocation_design_piping_close_tr", :row_id => "#y#"%></td>
			</tr>
		</table>		
	</div>
	
	<!-- list of discharge circuit piping -->
	<div id="list_of_reciprocation_design_piping" style="display:none;">
	<% compressor_sizing.compressor_reciprocation_designs.each_with_index do |crd, i|%>
		<% crd_row_id = i+1%>
		<% if crd.compressor_reciprocation_design_pipings.empty?%>		
			<% next%>
		<% end%>
		<div id="reciprocation_design_piping_box_<%= crd_row_id%>">			
			<table class="reciprocation_design_piping_table">
				<tr>
					<th rowspan="2">No.</th>
					<th rowspan="2">Fitting(s)</th>
					<th rowspan="2">Fitting Tag</th>
					<th>Pipe Size</th>
					<th rowspan="2">Pipe Sch.</th>
					<th>Pipe ID</th>
					<th rowspan="2">% Flow</th>
					<th rowspan="2">Ds/Dl<br>or Cv</th>
					<th>Length</th>
					<th>Elev.</th>
					<th>&Delta;P</th>
					<th>Inlet Pressure</th>
					<th rowspan="2"></th>
				</tr>
				<tr>
					<th>inches</th>
                    <th><label class="compressor_reciprocation_design_piping_pipe_id_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_length_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_elev_unit"></label></th>
                    <th><label class="compressor_reciprocation_design_piping_delta_p_unit"></label></th>
					<th><label class="compressor_reciprocation_design_piping_inlet_pressure_unit"></label></th>
				</tr>				
				<% crd.compressor_reciprocation_design_pipings.each_with_index do |crdp, j|%>				
				<tr>
					<td>
						<%= j+1%>						
						<%= hidden_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][id]", crdp.id, :id => "compressor_reciprocation_design_piping_id_#{j+1}" %>
					</td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][fitting]", options_for_select(PipeSizing.fitting.collect {|p| [raw(p[:value]), p[:id]]}.insert(0, ''), crdp.fitting), :id => "compressor_reciprocation_design_piping_fitting_#{j+1}", :style=>"width:200px;"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][fitting_tag]", crdp.fitting_tag, :id => "discharge_circuit_piping_fitting_tag_#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][pipe_size]", options_for_select(PipeSizing.pipe_sizes.collect {|p| [raw(p[:name]), p[:value]]}.insert(0, ''), crdp.pipe_size), :id => "compressor_reciprocation_design_piping_pipe_size_#{j+1}",:class =>"compressor_reciprocation_design_piping_pipe_size", :row_id => "#{j+1}"%></td>
					<td><%= select_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][pipe_schedule]", options_for_select(PipeSizing.pipe_size_schedules[crdp.pipe_size.to_s], crdp.pipe_schedule), :id => "compressor_reciprocation_design_piping_pipe_schedule_#{j+1}",:class =>"compressor_reciprocation_design_piping_pipe_schedule", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][pipe_id]", crdp.pipe_id, :id => "compressor_reciprocation_design_piping_pipe_id_#{j+1}",:class =>"compressor_reciprocation_design_piping_pipe_id", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][per_flow]", crdp.per_flow, :id => "compressor_reciprocation_design_piping_per_flow_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][ds_cv]", crdp.ds_cv, :id => "compressor_reciprocation_design_piping_ds_cv_#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][length]", crdp.length, :id => "compressor_reciprocation_design_piping_length_#{j+1}",:class =>"compressor_reciprocation_design_piping_length", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][elev]", crdp.elev, :id => "compressor_reciprocation_design_piping_elev_#{j+1}",:class =>"compressor_reciprocation_design_piping_elev", :row_id => "#{j+1}"%></td>
					<td><%= text_field_tag "compressor_sizing[compressor_reciprocation_designs][#{crd_row_id}][compressor_reciprocation_design_pipings][#{j+1}][delta_p]", crdp.delta_p, :id => "compressor_reciprocation_design_piping_delta_p_#{j+1}",:class =>"compressor_reciprocation_design_piping_delta_p", :row_id => "#{j+1}"%></td>
					<td><%= label_tag "inlet_pressure", "",:class =>"compressor_reciprocation_design_piping_inlet_pressure"%></td>
					<td><%= link_to "X", "#", :class => "reciprocation_design_piping_close_tr", :row_id => "#{j+1}"%></td>
				</tr>
				<% end%>				
			</table>
			
			<%= link_to "Add More", "#", :class=>"reciprocation_design_piping_box_add_more", :table_id=>"#{crd_row_id}"%>&nbsp;|&nbsp;<%= link_to "Close", "#", :class=>"reciprocation_design_piping_close"%>						
		</div>
	<% end%>
	</div>
	
	<!-- clone_circuit_piping -->
	<div style="display:none;">
		<div id="clone_circuit_piping_div" style="padding:10px;">
			<div style="float:left;height:90px;padding-top: 40px;">
				Source Circuit Piping<br>
				<%= select_tag "cricuit_piping", options_for_select(compressor_sizing.compressor_sizing_discharges.each_with_index.collect {|p, i| ["Design Path #{i+1}", p[:id]]}), :include_blank=>true, :id => "src_cricuit_piping", :style=>"width:150px;"%>	
			</div>
			<div style="float:left;margin-left:20px;text-align:center;">
				<img src="/images/arrow_right.png" alt="right arrow"><br>
				<input type="button" value="Clone" id="clone_circuit_piping_btn">
			</div> 
			<div style="float:left;margin-left:20px;height:90px;padding-top: 40px;">
				Target Circuit Piping<br>
				<%= select_tag "cricuit_piping", options_for_select(compressor_sizing.compressor_sizing_discharges.each_with_index.collect {|p, i| ["Design Path #{i+1}", p[:id]]}), :include_blank=>true, :id => "trg_cricuit_piping", :style=>"width:150px;"%>	
			</div>
			
			<div class="clear"></div>			
		</div>
	</div>	
		
	<!-- Compressor Sizing Mode-->
	<div class="hidden">
		<div id="add_compressor_sizing_mode_div">			
			<div class="form-element-last">
				<%= label_tag :mode_name%><br>
				<%= text_field_tag :mode_name%>
			</div>
			<div class="form-buttons">
				<input type="button" value="Add Compressor Sizing Mode"  id="add_compressor_sizing_mode_btn">		
  			</div>	
		</div>
		
		<div id="list_compressor_sizing_mode_div">
			<table>
				<tr>
					<td><b>S.No</b></td>
					<td><b>Compressor Sizing Mode</b></td>
					<td><b>Edit</b></td>
					<td><b>Delete</b></td>
				</tr>
				<% compressor_sizing_tag.compressor_sizing_modes.each_with_index do |mode, i|%>
				<tr>
					<td>
						<%= "#{i+1}"%>
						<%= hidden_field_tag "compressor_sizing_mode_id", mode.id, :id=>"compressor_sizing_mode_id_#{i+1}"%>						
					</td>
					<td>
						<span id='compressor_sizing_mode_name_<%= "#{i+1}"%>'><%= mode.mode_name%></span>
						<span id='edit_compressor_sizing_mode_name_<%= "#{i+1}"%>' class='hidden'><%= text_field_tag 'mode_name', mode.mode_name, :id=>"mode_name_#{i+1}", :style=>"width:150px;" %></span>
					</td>
					<td><%= link_to "edit", "#", :class=>"compressor_sizing_mode_edit", :row_id => "#{i+1}"%></td>
					<td><%= link_to "x", "#", :class => "compressor_sizing_mode_close_tr", :row_id => "#{i+1}" %></td>
				</tr>
				<% end%>
			</table>
		</div>					
	</div>
<% end%>

<%= javascript_tag do %>
	var sp_suction_count = <%= compressor_sizing.suction_pipings.where(:tab=>"suction").empty? ? 2 : compressor_sizing.suction_pipings.where(:tab=>"suction").length+1%>;
	var dc_count = <%= compressor_sizing.compressor_sizing_discharges.empty? ? 2 : compressor_sizing.compressor_sizing_discharges.length+1%>;
	var crd_count = <%= compressor_sizing.compressor_reciprocation_designs.empty? ? 2 : compressor_sizing.compressor_reciprocation_designs.length+1%>;
	var ccd_count = <%= compressor_sizing.compressor_centrifugal_designs.empty? ? 2 : compressor_sizing.compressor_centrifugal_designs.length+1%>;
	
	var pipe_size_schedules = <%= raw PipeSizing.pipe_size_schedules.to_json%>;
	var pipe_size_pipe_ods = <%= raw PipeSizing.pipe_size_pipe_od.to_json%>;
	var pipe_size_wall_thinkness = <%= raw PipeSizing.pipe_size_wall_thinkness.to_json%>;
    var pipe_id_conversion_factor = <%= @project.conversion_factor("Length", "Pipe Tube Diameter")%>;

    var compressor_sizing_tag_id = '<%= compressor_sizing_tag.id%>';
	<% if compressor_sizing_tag.new_record?%>
		$("#compressor_tabs,#compressor_modes_div").mask();
	<% else%>
		$(".edit_compressor_sizing_tag").submit(function(e){
			if($('#compressor_sizing_mode_sel').val() == "") {
				alert('Select Compressor Sizing Mode');
				return false;
			}			
		});	
	<% end%>
	<% if params[:compressor_sizing_mode].blank?%>
		$("#compressor_tabs").mask();
	<% end%>			
<% end%>

<script type="text/javascript">	
set_project_unit_and_decimals();
	var unit_decimals = {
		".suction_pipings_pipe_id":{"measurement":"Length", "measurement_sub_type":"Pipe Tube Diameter"},
		".suction_pipings_length":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
		".suction_pipings_elev":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
		".suction_pipings_delta_p":{"measurement":"Pressure", "measurement_sub_type":"Differential"},
        ".discharge_circuit_piping_pipe_id" :{"measurement":"Length", "measurement_sub_type":"Pipe Tube Diameter"},
        ".discharge_circuit_piping_length":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
        ".discharge_circuit_piping_elev":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
		".discharge_circuit_piping_delta_p":{"measurement":"Pressure", "measurement_sub_type":"Differential"},
        ".discharge_circuit_piping_inlet_pressure":{"measurement":"Pressure", "measurement_sub_type":"General"},
        ".compressor_centrifugal_design_piping_pipe_id" :{"measurement":"Length", "measurement_sub_type":"Pipe Tube Diameter"},
        ".compressor_centrifugal_design_piping_length":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
        ".compressor_centrifugal_design_piping_elev":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
		".compressor_centrifugal_design_piping_delta_p":{"measurement":"Pressure", "measurement_sub_type":"Differential"},
        ".compressor_centrifugal_design_piping_inlet_pressure":{"measurement":"Pressure", "measurement_sub_type":"General"},
        ".compressor_reciprocation_design_piping_pipe_id" :{"measurement":"Length", "measurement_sub_type":"Pipe Tube Diameter"},
        ".compressor_reciprocation_design_piping_length":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
        ".compressor_reciprocation_design_piping_elev":{"measurement":"Length", "measurement_sub_type":"Large Dimension Length"},
		".compressor_reciprocation_design_piping_delta_p":{"measurement":"Pressure", "measurement_sub_type":"Differential"},
        ".compressor_reciprocation_design_piping_inlet_pressure":{"measurement":"Pressure", "measurement_sub_type":"General"}
	};
    set_project_unit_decimals(unit_decimals);
    set_project_unit_labels(unit_decimals);


    $('#compressor_sizing_process_basis_id').change(function(e){
		$('#compressor_sizing_su_stream_no >option').remove();
		$('#compressor_sizing_su_stream_no').append($('<option></option>').val("").html("Please select"));
		$("#tab1 table input[type=text]").val('');
		if($(this).val() == "") {
			return false;
		}
		
		$.get('/admin/heat_and_material_balances/get_stream_nos',{process_basis_id:$(this).val()},function(data){						
			$(data).each(function(k, v){
				$('#compressor_sizing_su_stream_no').append(
					$('<option></option>').val(v.stream_no).html(v.display_stream_no)
				);				
			});						
		}, 'json');
	});
	
	$('#compressor_sizing_su_stream_no').change(function(e){
		$("#tab1 table input[type=text]").val('');
		if($(this).val() == "") {
			return false;			
		}
		
		$.get('/admin/compressor_sizings/get_stream_values',
			{process_basis_id:$('#compressor_sizing_process_basis_id').val(), stream_no:$('#compressor_sizing_su_stream_no').val()},
			function(data){
				//$('#storage_tank_sizing_s_'+col+'_pressure').val(get_project_field_value1("pressure_general",data['pressure']));
				$('#compressor_sizing_su_pressure').val(get_project_field_value1("pressure_general",data['pressure_value']));
				$('#compressor_sizing_su_temperature').val(get_project_field_value1("temperature_general",data['temperature_value']));
				$('#compressor_sizing_su_mass_flow_rate').val(get_project_field_value1("mass_flow_rate_general",data['mass_flow_rate_value']));
				$('#compressor_sizing_su_vapor_density').val(get_project_field_value1("density_general",data['vapor_density_value']));
				$('#compressor_sizing_su_vapor_viscosity').val(get_project_field_value1("viscosity_general",data['vapor_viscosity_values']));
			},
		'json');		
	});
	
	//suction piping
	$('#enter_circuit_piping').click(function(e){		
		$.colorbox({href:'#suction_piping_box', inline:true, width:'100%', height:'100%'});		
	});
	
	$('#add_new_suction_piping').click(function(e){
		var new_suction_piping_tr = $('#new_suction_piping_tr').html().replace(/#x#/g, sp_suction_count);		
		$('#suction_piping_table').append($(new_suction_piping_tr));
		sp_suction_count++;
        set_project_unit_decimal('.suction_pipings_pipe_id', unit_decimals);
		set_project_unit_decimal('.suction_pipings_length', unit_decimals);
		set_project_unit_decimal('.suction_pipings_elev', unit_decimals);
		set_project_unit_decimal('.suction_pipings_delta_p', unit_decimals);
		return false;
	});
	
	$('#close_suction_piping').click(function(e){
		$.colorbox.close();
		return false;
	});
	
	$('.compressor_sizing_close_tr').live('click', function(e){		
		$('#suction_pipings_fitting_'+$(this).attr('suction_piping_id')).val('');		
		$(this).parents('tr').hide();
		return false;
	});
	
	//Discharge Tab
	$('#add_new_discharge_row').click(function(e){
		var new_discharge_row = $('#new_row_discharge').html().replace(/#x#/g, dc_count);		
		$('#compressor_sizing_discharges').append($(new_discharge_row));
		dc_count++;
		return false;
	});
	
	$('.discharge_table_close_tr').live('click', function(e){
		var row_id = $(this).attr('row_id');		
		$('#discharge_process_basis_id_'+row_id).val('');
		$(this).parents('tr').hide();		
		return false;
	});
	
	$('select[id^="discharge_process_basis_id_"]').live('change', function(e){
		var row_id = $(this).attr('row_id');
		$('#discharge_destination_stream_no_'+row_id+' >option').remove();
		$('#discharge_destination_stream_no_'+row_id).append($('<option></option>').val("").html(""));
		if($(this).val() == "") {
			return false;
		}
		
		$.get('/admin/heat_and_material_balances/get_stream_nos',
			{process_basis_id:$(this).val()},
			function(data){
				$(data).each(function(k, v){
					$('#discharge_destination_stream_no_'+row_id).append(
						$('<option></option>').val(v.stream_no).html(v.display_stream_no)
					);
				});						
			},
			'json'
		);
	});
	
	$('select[id^="discharge_destination_stream_no_"]').live('change', function(e){
		var row_id = $(this).attr('row_id');
		$('#discharge_destination_pressure_'+row_id).val('');
		if($(this).val() == "") {
			return false;
		}
		
		$.get('/admin/compressor_sizings/get_discharge_stream_nos',
			{process_basis_id:$('#discharge_process_basis_id_'+row_id).val(), stream_no:$(this).val()},
			function(data){
				$('#discharge_destination_pressure_'+row_id).val(data['pressure']);										
			},
			'json'
		);
	});
	
	$('#compressor_sizing_discharges input[name=design_circuit]').live('click', function(e){
		$("input[id^=discharge_design_circuit_]").val("");
		$('#discharge_design_circuit_'+$(this).val()).val(true);
	});
	
	//discharge_circuit_piping
	$('.circuit_piping_btn').live('click', function(e){
		var row_id = $(this).attr('row_id');
		var discharge_circuit_piping_box = $('#discharge_circuit_piping_div').html().replace(/#x#/g, row_id);		
		if($('#discharge_circuit_piping_box_'+row_id).text() == "") {
			$('#list_of_discharge_circuit_piping').append($(discharge_circuit_piping_box));
		}
		$.colorbox({
			href:'#discharge_circuit_piping_box_'+row_id, 
			inline:true, 
			width:'100%', 
			height:'100%',
			onComplete: function(){
				var tr_row_id = parseInt($('#discharge_circuit_piping_box_'+row_id+' table tr:last td:last a').attr('row_id'))+1;
				$('#discharge_circuit_piping_box_'+row_id).data({tr_row_id:tr_row_id, discharge_row_id:row_id});
				return false;
			}
		});
        set_project_unit_decimal('.discharge_circuit_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.discharge_circuit_piping_length', unit_decimals);
		set_project_unit_decimal('.discharge_circuit_piping_elev', unit_decimals);
		set_project_unit_decimal('.discharge_circuit_piping_delta_p', unit_decimals);
		return false;
	});
	
	$('.discharge_circuit_piping_add_more').live('click', function(e){
		var table_id = $(this).attr('table_id');
		var tr_row_id = $('#discharge_circuit_piping_box_'+table_id).data()['tr_row_id'];
		var new_discharge_circuit_pipings_tr = $('#discharge_circuit_pipings_tr').html().replace(/#x#/g, table_id);
		new_discharge_circuit_pipings_tr = new_discharge_circuit_pipings_tr.replace(/#y#/g, tr_row_id);
		$('#discharge_circuit_piping_box_'+table_id+' table').append($(new_discharge_circuit_pipings_tr));
		$('#discharge_circuit_piping_box_'+table_id).data()['tr_row_id'] = tr_row_id+1;
        set_project_unit_decimal('.discharge_circuit_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.discharge_circuit_piping_length', unit_decimals);
		set_project_unit_decimal('.discharge_circuit_piping_elev', unit_decimals);
		set_project_unit_decimal('.discharge_circuit_piping_delta_p', unit_decimals);
		return false;
	});
	
	$('.discharge_circuit_piping_close,.centrifugal_design_piping_close,.reciprocation_design_piping_close').live('click', function(e){
		$.colorbox.close();
		return false;
	});
	
	$('.discharge_circuit_piping_close_tr').live('click', function(e){
		$(this).parents('tr').find('#discharge_circuit_piping_fitting_'+$(this).attr('row_id')).val("");
		$(this).parents('tr').hide();
		return false;
	});
	
	$('#show_clone_circuit_piping').click(function(e){
		$.colorbox({
			href:'#clone_circuit_piping_div', 
			inline:true});			
		return false;
	});
	
	$('#clone_circuit_piping_btn').click(function(e){
		var src_circuit_piping = $('#src_cricuit_piping').val();
		var trg_cricuit_piping = $('#trg_cricuit_piping').val();
		if(src_circuit_piping == "" || trg_cricuit_piping == "") {
			return false;
		}
		
		$('#clone_circuit_piping_btn').attr("disabled", true);
		
		$.get('/admin/compressor_sizings/clone_circuit_piping', 
			{src_circuit_piping:src_circuit_piping, trg_cricuit_piping:trg_cricuit_piping},
			function(data){
				$('#clone_circuit_piping_btn').attr("disabled", false);
				alert('Circuit piping cloned successfully.');
				window.location.reload(true);
			},
			'json'
		);
		
		return false;
	});
	
	$('#efficiency_btn').click(function(e){
		$.colorbox({
			href:'#efficiency_div', 
			inline:true,
			width:'auto',
			height:'auto'});
		return false;
	});
	
	$('#no_of_wheels_btn').click(function(e){
		$.colorbox({
			href:'#no_of_wheels_div', 
			inline:true,
			width:'auto',
			height:'auto'});
		return false;
	});
	
	//add_compressor_sizing_mode
	$('#add_compressor_sizing_mode').click(function(e){		
		$.colorbox({
			href:'#add_compressor_sizing_mode_div', 
			inline:true,
			width:'auto',
			height:'auto'});
		return false;
	});
	
	$('#add_compressor_sizing_mode_btn').click(function(e){
		if($('#mode_name').val() == '') {
			return false;
		}
		$.post(
			'/admin/compressor_sizings/add_compressor_sizing_mode', 
			{compressor_sizing_tag_id:compressor_sizing_tag_id, mode_name:$('#mode_name').val()}, 
			function(){
				$('#mode_name').val('');
			}, 'script');
	});
	
	$('#list_compressor_sizing_modes').click(function(e){
		$.colorbox({
			href:'#list_compressor_sizing_mode_div', 
			inline:true,
			width:'auto',
			height:'auto',
			onClosed: function() {
				window.location.reload(true);
			}
		});
		return false;
	});
	
	//edit
	$('.compressor_sizing_mode_edit').click(function(e){		
		var row_id = $(this).attr('row_id');
		var $mode_name_id = $('#compressor_sizing_mode_id_'+row_id);
		var $mode_name_lbl = $('#compressor_sizing_mode_name_'+row_id);		
		var $mode_name_txt = $('#edit_compressor_sizing_mode_name_'+row_id);
		var $txt = $(this).text();
		
		if($txt == 'edit') {
			$mode_name_lbl.hide();
			$mode_name_txt.show();
			$.colorbox.resize();
			$(this).text('save');	
		} else if ($txt == 'save') {
			$mode_name_lbl.show();
			$mode_name_txt.hide();			
			$.post(
			'/admin/compressor_sizings/edit_compressor_sizing_mode', 
			{id:$mode_name_id.val(), mode_name:$mode_name_txt.find('#mode_name_'+row_id).val()}, 
			function(){
				$mode_name_lbl.text($mode_name_txt.find('#mode_name_'+row_id).val());
				$mode_name_lbl.closest('tr').find('td').glow('', 5000);				
			}, 'script');
								
			$(this).text('edit');
		}
					
		return false;
	});
	
	$('.compressor_sizing_mode_close_tr').click(function(e){
		var row_id = $(this).attr('row_id');
		var $mode_name_id = $('#compressor_sizing_mode_id_'+row_id);
		$.post(
			'/admin/compressor_sizings/delete_compressor_sizing_mode', 
			{id:$mode_name_id.val()}, 
			function(){					
				$mode_name_id.closest('tr').hide();
			}, 'script');
	});
	
	//compressor_sizing_mode_sel
	$('#compressor_sizing_mode_sel').change(function(e){
		if($(this).val() == "") {
			return false;
		}
		window.location = "?compressor_sizing_mode="+$(this).val();
	});
	
	//mechanical_specification
	$('#add_new_mechanical_specification_column').click(function(e){
		var new_mechanical_specification_field = $('#new_mechanical_specification_field').html().replace(/#x#/g, crd_count);			
		$('.mechanical_specification_fields').append($(new_mechanical_specification_field));
		crd_count++;
		return false;
	});
	
	$('.close_mechanical_specification_field').live('click', function(e){
		var $column = $(this).closest('div.mechanical_specification_field');
		$column.find('.compressor_reciprocation_design_delete').val('true');				
		$column.mask();			
		return false;
	});
	
	//compressor_centrifugal_designs
	$('#add_new_centrifugal_design_column').click(function(e){
		var new_centrifugal_design_field = $('#new_centrifugal_design_field').html().replace(/#x#/g, ccd_count);			
		$('.centrifugal_design_fields').append($(new_centrifugal_design_field));
		ccd_count++;
		return false;
	});
	
	$('.close_centrifugal_design_field').live('click', function(e){
		var $column = $(this).closest('div.centrifugal_design_field');
		$column.find('.compressor_centrifugal_design_delete').val('true');				
		$column.mask();
		return false;
	});
	
	//centrifugal_design_piping
	$('.centrifugal_design_piping_btn').live('click', function(e){
		var row_id = $(this).attr('row_id');		
		var centrifugal_design_piping_box = $('#centrifugal_design_piping_div').html().replace(/#x#/g, row_id);
		$('#centrifugal_design_piping_box_'+row_id).text()				
		if($('#centrifugal_design_piping_box_'+row_id).text() == "") {			
			$('#list_of_centrifugal_design_piping').append($(centrifugal_design_piping_box));
		}
		$.colorbox({
			href:'#centrifugal_design_piping_box_'+row_id, 
			inline:true, 
			width:'100%', 
			height:'100%',
			onComplete: function(){
				var tr_row_id = parseInt($('#centrifugal_design_piping_box_'+row_id+' table tr:last td:last a').attr('row_id'))+1;				
				$('#centrifugal_design_piping_box_'+row_id).data({tr_row_id:tr_row_id, piping_row_id:row_id});
				return false;
			}
		});
        set_project_unit_decimal('.compressor_centrifugal_design_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.compressor_centrifugal_design_piping_length', unit_decimals);
		set_project_unit_decimal('.compressor_centrifugal_design_piping_elev', unit_decimals);
		set_project_unit_decimal('.compressor_centrifugal_design_piping_delta_p', unit_decimals);
		return false;
	});
	
	$('.centrifugal_design_piping_box_add_more').live('click', function(e){
		var table_id = $(this).attr('table_id');		
		var tr_row_id = $('#centrifugal_design_piping_box_'+table_id).data()['tr_row_id'];				
		var new_centrifugal_design_piping_tr = $('#compressor_centrifugal_design_piping_tr').html().replace(/#x#/g, table_id);
		new_centrifugal_design_piping_tr = new_centrifugal_design_piping_tr.replace(/#y#/g, tr_row_id);
		$('#centrifugal_design_piping_box_'+table_id+' table').append($(new_centrifugal_design_piping_tr));
		$('#centrifugal_design_piping_box_'+table_id).data()['tr_row_id'] = tr_row_id+1;
		set_project_unit_decimal('.compressor_centrifugal_design_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.compressor_centrifugal_design_piping_length', unit_decimals);
		set_project_unit_decimal('.compressor_centrifugal_design_piping_elev', unit_decimals);
		set_project_unit_decimal('.compressor_centrifugal_design_piping_delta_p', unit_decimals);
        return false;
	});
	
	$('.centrifugal_design_piping_close_tr').live('click', function(e){
		$('#compressor_centrifugal_design_piping_fitting_'+$(this).attr('row_id')).val('');
		deleted_tr($(this).closest('tr'));
		return false;
	});
	
	//compressor_reciprocation_design_piping
	$('.compressor_reciprocation_design_piping_btn').live('click', function(e){
		var row_id = $(this).attr('row_id');		
		var reciprocation_design_piping_box = $('#reciprocation_design_piping_div').html().replace(/#x#/g, row_id);
		$('#reciprocation_design_piping_box_'+row_id).text()				
		if($('#reciprocation_design_piping_box_'+row_id).text() == "") {			
			$('#list_of_reciprocation_design_piping').append($(reciprocation_design_piping_box));
		}
		$.colorbox({
			href:'#reciprocation_design_piping_box_'+row_id, 
			inline:true, 
			width:'100%', 
			height:'100%',
			onComplete: function(){
				var tr_row_id = parseInt($('#reciprocation_design_piping_box_'+row_id+' table tr:last td:last a').attr('row_id'))+1;				
				$('#reciprocation_design_piping_box_'+row_id).data({tr_row_id:tr_row_id, piping_row_id:row_id});
				return false;
			}
		});
        set_project_unit_decimal('.compressor_reciprocation_design_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.compressor_reciprocation_design_piping_length', unit_decimals);
		set_project_unit_decimal('.compressor_reciprocation_design_piping_elev', unit_decimals);
		set_project_unit_decimal('.compressor_reciprocation_design_piping_delta_p', unit_decimals);
		return false;
	});
	
	$('.reciprocation_design_piping_box_add_more').live('click', function(e){
		var table_id = $(this).attr('table_id');		
		var tr_row_id = $('#reciprocation_design_piping_box_'+table_id).data()['tr_row_id'];				
		var new_reciprocation_design_piping_tr = $('#compressor_reciprocation_design_piping_tr').html().replace(/#x#/g, table_id);
		new_reciprocation_design_piping_tr = new_reciprocation_design_piping_tr.replace(/#y#/g, tr_row_id);
		$('#reciprocation_design_piping_box_'+table_id+' table').append($(new_reciprocation_design_piping_tr));
		$('#reciprocation_design_piping_box_'+table_id).data()['tr_row_id'] = tr_row_id+1;
        set_project_unit_decimal('.compressor_reciprocation_design_piping_pipe_id', unit_decimals);
        set_project_unit_decimal('.compressor_reciprocation_design_piping_length', unit_decimals);
		set_project_unit_decimal('.compressor_reciprocation_design_piping_elev', unit_decimals);
		set_project_unit_decimal('.compressor_reciprocation_design_piping_delta_p', unit_decimals);
		return false;		
	});
	
	$('.reciprocation_design_piping_close_tr').live('click', function(e){
		$('#compressor_reciprocation_design_piping_fitting_'+$(this).attr('row_id')).val('');
		deleted_tr($(this).closest('tr'));
		return false;
	});

      // Suction_piping
    $('.suction_pipings_pipe_size').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#suction_pipings_pipe_id_'+row_id).val('');
        $('#suction_pipings_pipe_schedule_'+ row_id +'>option').remove();
        $('#suction_pipings_pipe_schedule_' + row_id).append($('<option></option>').val("").html(""));
        $(pipe_size_schedules[$(this).val()]).each(  function(k,v){
            $('#suction_pipings_pipe_schedule_' + row_id).append($('<option></option>').val(v).html(v));
        });
    });

    $('.suction_pipings_pipe_schedule').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#suction_pipings_pipe_id_'+row_id).val('');
        if($(this).val() == '') {
            return false;
        }
        var pipe_od = pipe_size_pipe_ods[$('#suction_pipings_pipe_size_'+row_id).val()] / pipe_id_conversion_factor;
        var wall_thickness = pipe_size_wall_thinkness[$('#suction_pipings_pipe_size_'+row_id).val()][$(this).val()] / pipe_id_conversion_factor;
        var pipe_id = pipe_od - (2 * wall_thickness);
        $('#suction_pipings_pipe_id_'+row_id).val(get_project_field_value('.suction_pipings_pipe_id', pipe_id, unit_decimals));
    });


    // discharge_circuit_piping
    $('.discharge_circuit_piping_pipe_size').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#discharge_circuit_piping_pipe_id_'+row_id).val('');
        $('#discharge_circuit_piping_pipe_schedule_'+ row_id +'>option').remove();
        $('#discharge_circuit_piping_pipe_schedule_' + row_id).append($('<option></option>').val("").html(""));
        $(pipe_size_schedules[$(this).val()]).each(  function(k,v){
            $('#discharge_circuit_piping_pipe_schedule_' + row_id).append($('<option></option>').val(v).html(v));
        });
    });


    $('.discharge_circuit_piping_pipe_schedule').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#discharge_circuit_piping_pipe_id_'+row_id).val('');
        if($(this).val() == '') {
            return false;
        }
        var pipe_od = pipe_size_pipe_ods[$('#discharge_circuit_piping_pipe_size_'+row_id).val()] / pipe_id_conversion_factor;
        var wall_thickness = pipe_size_wall_thinkness[$('#discharge_circuit_piping_pipe_size_'+row_id).val()][$(this).val()] / pipe_id_conversion_factor;
        var pipe_id = pipe_od - (2 * wall_thickness);
        $('#discharge_circuit_piping_pipe_id_'+row_id).val(get_project_field_value('.discharge_circuit_piping_pipe_id', pipe_id, unit_decimals));
    });


    // compressor_centrifugal_design_piping
    $('.compressor_centrifugal_design_piping_pipe_size').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#compressor_centrifugal_design_piping_pipe_id_'+row_id).val('');
        $('#compressor_centrifugal_design_piping_pipe_schedule_'+ row_id +'>option').remove();
        $('#compressor_centrifugal_design_piping_pipe_schedule_' + row_id).append($('<option></option>').val("").html(""));
        $(pipe_size_schedules[$(this).val()]).each(  function(k,v){
            $('#compressor_centrifugal_design_piping_pipe_schedule_' + row_id).append($('<option></option>').val(v).html(v));
        });
    });


    $('.compressor_centrifugal_design_piping_pipe_schedule').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#compressor_centrifugal_design_piping_pipe_id_'+row_id).val('');
        if($(this).val() == '') {
            return false;
        }
        var pipe_od = pipe_size_pipe_ods[$('#compressor_centrifugal_design_piping_pipe_size_'+row_id).val()] / pipe_id_conversion_factor;
        var wall_thickness = pipe_size_wall_thinkness[$('#compressor_centrifugal_design_piping_pipe_size_'+row_id).val()][$(this).val()] / pipe_id_conversion_factor;
        var pipe_id = pipe_od - (2 * wall_thickness);
        $('#compressor_centrifugal_design_piping_pipe_id_'+row_id).val(get_project_field_value('.compressor_centrifugal_design_piping_pipe_id', pipe_id, unit_decimals));
    });

    // compressor_reciprocation_design_piping
    $('.compressor_reciprocation_design_piping_pipe_size').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#compressor_reciprocation_design_piping_pipe_id_'+row_id).val('');
        $('#compressor_reciprocation_design_piping_pipe_schedule_'+ row_id +'>option').remove();
        $('#compressor_reciprocation_design_piping_pipe_schedule_' + row_id).append($('<option></option>').val("").html(""));
        $(pipe_size_schedules[$(this).val()]).each(  function(k,v){
            $('#compressor_reciprocation_design_piping_pipe_schedule_' + row_id).append($('<option></option>').val(v).html(v));
        });
    });


    $('.compressor_reciprocation_design_piping_pipe_schedule').live('change',function(k)
    {
        var row_id = $(this).attr('row_id');
        $('#compressor_reciprocation_design_piping_pipe_id_'+row_id).val('');
        if($(this).val() == '') {
            return false;
        }
        var pipe_od = pipe_size_pipe_ods[$('#compressor_reciprocation_design_piping_pipe_size_'+row_id).val()] / pipe_id_conversion_factor;
        var wall_thickness = pipe_size_wall_thinkness[$('#compressor_reciprocation_design_piping_pipe_size_'+row_id).val()][$(this).val()] / pipe_id_conversion_factor;
        var pipe_id = pipe_od - (2 * wall_thickness);
        $('#compressor_reciprocation_design_piping_pipe_id_'+row_id).val(get_project_field_value('.compressor_reciprocation_design_piping_pipe_id', pipe_id, unit_decimals));
    });
	

</script>
